<!DOCTYPE html>
<html lang="id">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
Â  <title>Annur Islamic</title>
Â  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
Â  <style>
Â  Â  :root {
Â  Â  Â  --primary-bg: #f0f4f8;
Â  Â  Â  --header-bg: #0d264a;
Â  Â  Â  --header-text: #ffffff;
Â  Â  Â  --accent-color: #f9d788;
Â  Â  Â  --text-color: #333333;
Â  Â  Â  --text-light: #888;
Â  Â  Â  --card-bg: #ffffff;
Â  Â  Â  --card-shadow: rgba(0, 0, 0, 0.08);
Â  Â  Â  --radius: 12px;
Â  Â  Â  --transition: 0.3s ease;
Â  Â  Â  --active-tab: #0d264a;
Â  Â  Â  --bookmark-active: #ffc107;
Â  Â  Â  --tap-area-bg: #e9eef2;
Â  Â  }

Â  Â  body.dark-mode {
Â  Â  Â  --primary-bg: #121212;
Â  Â  Â  --header-bg: #1a1a2e;
Â  Â  Â  --header-text: #e0e0e0;
Â  Â  Â  --text-color: #e0e0e0;
Â  Â  Â  --text-light: #aaa;
Â  Â  Â  --card-bg: #1e1e1e;
Â  Â  Â  --card-shadow: rgba(255, 255, 255, 0.05);
Â  Â  Â  --active-tab: #f9d788;
Â  Â  Â  --tap-area-bg: #2c2c3a;
Â  Â  }

Â  Â  * { margin: 0; padding: 0; box-sizing: border-box; }

Â  Â  body {
Â  Â  Â  font-family: 'Poppins', sans-serif;
Â  Â  Â  color: var(--text-color);
Â  Â  Â  background-color: var(--primary-bg);
Â  Â  Â  -webkit-user-select: none; user-select: none;
Â  Â  Â  transition: background-color var(--transition), color var(--transition);
Â  Â  }
Â  Â  .app-container { width: 100%; max-width: 420px; margin: 0 auto; }

Â  Â  /* --- COMMON VIEW STYLES --- */
Â  Â  .view-header { display: flex; align-items: center; margin-bottom: 1.5rem; position: relative; justify-content: center; padding: 0 1rem; }
Â  Â  .back-button { position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); font-size: 1.5rem; cursor: pointer; color: var(--text-color); padding: 0.5rem; }
Â  Â  .view-header h2 { font-size: 1.2rem; font-weight: 600; text-align: center; }

Â  Â  /* --- LAYAR UTAMA (JADWAL SHOLAT) --- */
Â  Â  #prayer-times-view { padding-bottom: 2rem; }
Â  Â  #prayer-times-view .main-header {
Â  Â  Â  background: var(--header-bg); color: var(--header-text); padding: 1.5rem 1.5rem 3.5rem 1.5rem;
Â  Â  Â  border-bottom-left-radius: 40px; border-bottom-right-radius: 40px; text-align: center;
Â  Â  Â  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); position: relative; transition: background-color var(--transition);
Â  Â  }
Â  Â  #prayer-times-view .main-header h1 { font-size: 1.5rem; font-weight: 700; color: var(--accent-color); margin-bottom: 0.25rem; }
Â  Â  #prayer-times-view .main-header p { font-size: 0.9rem; color: var(--header-text); opacity: 0.9; margin-bottom: 0.5rem; }
Â  Â  #prayer-times-view #countdown-timer { font-size: 2.25rem; font-weight: 700; color: var(--header-text); letter-spacing: 2px; }
Â  Â  #prayer-times-view #location-display { position: absolute; top: 1.2rem; right: 1.2rem; display: flex; align-items: center; background: rgba(255, 255, 255, 0.15); padding: 0.4rem 0.8rem; border-radius: var(--radius); font-size: 0.8rem; font-weight: 500; color: var(--header-text); border: 1px solid rgba(255, 255, 255, 0.2); }
Â  Â  #prayer-times-view #location-display .icon { margin-right: 0.4rem; }
Â  Â  #prayer-times-view .calendar-section { background-color: var(--card-bg); border-radius: var(--radius); margin: -2.5rem 1rem 1rem 1rem; padding: 1rem; box-shadow: 0 4px 10px var(--card-shadow); position: relative; z-index: 10; transition: background-color var(--transition); }
Â  Â  #prayer-times-view .date-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; font-size: 0.9rem; font-weight: 600; }
Â  Â  #prayer-times-view .date-header .hijri-date { color: var(--header-bg); }
Â  Â  #prayer-times-view .date-header .gregorian-date { color: var(--text-light); font-weight: 400; }
Â  Â  #prayer-times-view .calendar-view { display: flex; justify-content: space-around; text-align: center; }
Â  Â  #prayer-times-view .day { display: flex; flex-direction: column; align-items: center; }
Â  Â  #prayer-times-view .day .day-name { font-size: 0.75rem; color: #999; margin-bottom: 0.5rem; }
Â  Â  #prayer-times-view .day .day-number { font-size: 1rem; font-weight: 600; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 50%; }
Â  Â  #prayer-times-view .day.today .day-number { background-color: var(--header-bg); color: var(--header-text); }
Â  Â  #prayer-times-view .prayer-list-section { padding: 0 1rem; }
Â  Â  #prayer-times-view .prayer-item { display: flex; align-items: center; justify-content: space-between; background-color: var(--card-bg); padding: 1rem; border-radius: var(--radius); margin-bottom: 0.75rem; box-shadow: 0 2px 5px var(--card-shadow); transition: transform var(--transition), background-color var(--transition); }
Â  Â  #prayer-times-view .prayer-item .icon-status { font-size: 1.5rem; color: var(--header-bg); margin-right: 1rem; }
Â  Â  #prayer-times-view .prayer-details { flex-grow: 1; min-width: 0; }
Â  Â  #prayer-times-view .prayer-details .prayer-name { font-weight: 600; font-size: 1rem; }
Â  Â  #prayer-times-view .prayer-details .prayer-desc { font-size: 0.75rem; color: var(--text-light); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
Â  Â  #prayer-times-view .prayer-time-action { display: flex; align-items: center; gap: 0.75rem; margin-left: 0.5rem; }
Â  Â  #prayer-times-view .prayer-time { font-size: 1.1rem; font-weight: 600; }
Â  Â  #prayer-times-view .prayer-action { font-size: 1.25rem; color: #aaa; }

Â  Â  /* --- TAMPILAN DOA HARIAN --- */
Â  Â  #doa-view { padding-top: 1.5rem; padding-bottom: 2rem; }
Â  Â  .last-read-card { background-color: var(--card-bg); border-radius: var(--radius); padding: 1rem; margin: 0 1rem 1.5rem 1rem; box-shadow: 0 2px 5px var(--card-shadow); cursor: pointer;}
Â  Â  .last-read-card h3 { font-size: 0.8rem; text-transform: uppercase; color: var(--text-light); margin-bottom: 0.5rem; font-weight: 500; }
Â  Â  .last-read-card p { font-weight: 600; font-size: 1rem; }
Â  Â  .tabs-container { display: flex; border-bottom: 2px solid #e0e0e0; margin: 0 1rem 1rem 1rem; }
Â  Â  body.dark-mode .tabs-container { border-bottom-color: #333; }
Â  Â  .tab-item { flex: 1; text-align: center; padding: 0.8rem 0; font-weight: 600; font-size: 0.9rem; color: var(--text-light); cursor: pointer; position: relative; }
Â  Â  .tab-item.active { color: var(--active-tab); }
Â  Â  .tab-item.active::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 100%; height: 2px; background-color: var(--active-tab); }
Â  Â  .doa-list-container { padding: 0 0.5rem; }
Â  Â  .doa-list-item { display: flex; align-items: center; padding: 0.8rem 0.5rem; border-bottom: 1px solid #eee; cursor: pointer; }
Â  Â  body.dark-mode .doa-list-item { border-bottom-color: #333; }
Â  Â  .doa-list-item .num { font-weight: 500; color: var(--text-light); width: 2rem; flex-shrink: 0; }
Â  Â  .doa-list-item .details { flex-grow: 1; min-width: 0; margin-right: 0.5rem; }
Â  Â  .doa-list-item .details .title { font-weight: 600; }
Â  Â  .doa-list-item .details .subtitle { font-size: 0.8rem; color: var(--text-light); }
Â  Â  .doa-list-item .arabic { font-size: 1.2rem; font-weight: 500; color: var(--text-color); white-space: nowrap; }
Â  Â Â 
Â  Â  /* --- TAMPILAN DZIKIR --- */
Â  Â  #dzikir-view { padding-top: 1.5rem; padding-bottom: 2rem; }
Â  Â  .dzikir-list-container { padding: 0 1rem; }
Â  Â  .dzikir-item { background-color: var(--card-bg); padding: 1rem; border-radius: var(--radius); margin-bottom: 0.75rem; box-shadow: 0 2px 5px var(--card-shadow); display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: transform 0.2s ease; }
Â  Â  .dzikir-item:active { transform: scale(0.98); }
Â  Â  .dzikir-item-info { display: flex; flex-direction: column; }
Â  Â  .dzikir-item-info .title { font-weight: 600; font-size: 1.1rem; }
Â  Â  .dzikir-item-info .timestamp { font-size: 0.75rem; color: var(--text-light); }
Â  Â  .dzikir-item-progress { text-align: right; }
Â  Â  .dzikir-item-progress .count { font-size: 1.1rem; font-weight: 600; }
Â  Â  .dzikir-item-progress .lap { font-size: 0.75rem; color: var(--text-light); }

Â  Â  /* --- TAMPILAN TASBIH --- */
Â  Â  #tasbih-view { display: none; flex-direction: column; height: 100vh; padding-top: 1.5rem; }
Â  Â  #tasbih-view .view-header { flex-shrink: 0; }
Â  Â  #tasbih-view .tasbih-main { flex-grow: 1; display: flex; flex-direction: column; justify-content: space-around; align-items: center; padding: 1rem; }
Â  Â  #tasbih-counter-display { text-align: center; }
Â  Â  #tasbih-counter-display .count { font-size: 4rem; font-weight: 700; }
Â  Â  #tasbih-counter-display .target { font-size: 1.2rem; color: var(--text-light); }
Â  Â  #tasbih-tap-area { width: 220px; height: 220px; background-color: var(--tap-area-bg); border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; box-shadow: 0 5px 15px var(--card-shadow); transition: transform 0.1s ease; }
Â  Â  #tasbih-tap-area:active { transform: scale(0.95); }
Â  Â  #tasbih-tap-area .tap-icon { font-size: 4rem; color: var(--text-light); }
Â  Â  #tasbih-reset-btn { background: none; border: 2px solid var(--text-light); color: var(--text-light); font-size: 1rem; padding: 0.6rem 1.5rem; border-radius: 2rem; cursor: pointer; transition: background-color var(--transition); }
Â  Â  #tasbih-reset-btn:active { background-color: rgba(136, 136, 136, 0.2); }

Â  Â  /* --- SIDEBAR & MODAL (CSS UMUM) --- */
Â  Â  #menu-toggle { position: absolute; top: 1.2rem; left: 1.2rem; width: 40px; height: 40px; background: rgba(255, 255, 255, 0.15); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: var(--radius); cursor: pointer; z-index: 2000; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 8px; transition: all var(--transition); }
Â  Â  #menu-toggle .bar { display: block; width: 100%; height: 2px; background: var(--header-text); margin: 3px 0; transition: all var(--transition); border-radius: 2px; }
Â  Â  #sidebar { position: fixed; top: 0; left: -300px; width: 280px; height: 100%; background: var(--card-bg); box-shadow: 4px 0 15px rgba(0, 0, 0, 0.1); padding: 1.5rem; transition: left var(--transition), background-color var(--transition); z-index: 1500; overflow-y: auto; }
Â  Â  #sidebar.open { left: 0; }
Â  Â  #sidebar h3 { font-size: 1.2rem; font-weight: 600; color: var(--header-bg); margin-top: 3rem; margin-bottom: 1.5rem; }
Â  Â  #sidebar ul { list-style: none; padding: 0; }
Â  Â  #sidebar ul li a { display: block; padding: 0.8rem 1rem; text-decoration: none; color: var(--text-color); font-weight: 500; border-radius: var(--radius); transition: background-color var(--transition), color var(--transition); }
Â  Â  #sidebar ul li a:hover, #sidebar ul li a.active { background-color: var(--header-bg); color: var(--header-text); }
Â  Â Â 
Â  Â  .full-modal { position: fixed; z-index: 3000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); display: none; align-items: center; justify-content: center; }
Â  Â  .full-modal .modal-content { background-color: var(--primary-bg); color: var(--text-color); padding: 0; border-radius: var(--radius); width: 90%; max-width: 400px; max-height: 85%; box-shadow: 0 5px 20px rgba(0,0,0,0.2); animation: modal-appear 0.4s ease; display: flex; flex-direction: column; }
Â  Â  @keyframes modal-appear { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
Â  Â  .full-modal .modal-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 1.5rem; border-bottom: 1px solid #ddd; }
Â  Â  body.dark-mode .full-modal .modal-header { border-bottom-color: #444; }
Â  Â  .full-modal .modal-header h3 { color: var(--header-bg); font-size: 1.1rem; flex-grow: 1; text-align: center; margin: 0 1rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
Â  Â  .full-modal .close-button { font-size: 2rem; color: #aaa; cursor: pointer; font-weight: 300; }
Â  Â  .full-modal .modal-header .action-icon { font-size: 1.5rem; cursor: pointer; color: var(--text-light); }
Â  Â  .full-modal .modal-header .action-icon.bookmarked { color: var(--bookmark-active); }
Â  Â  .full-modal .modal-body { padding: 1.5rem; overflow-y: auto; flex-grow: 1; }

Â  Â  /* STYLE KONTEN MODAL */
Â  Â  .settings-item { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; border-bottom: 1px solid #eee; }
Â  Â  body.dark-mode .settings-item { border-bottom-color: #333; }
Â  Â  .settings-item:last-child { border-bottom: none; }
Â  Â  .settings-item label { font-weight: 500; }
Â  Â  .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
Â  Â  .switch input { opacity: 0; width: 0; height: 0; }
Â  Â  .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; border-radius: 28px; transition: var(--transition); }
Â  Â  .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; border-radius: 50%; transition: var(--transition); }
Â  Â  input:checked + .slider { background-color: var(--header-bg); }
Â  Â  input:checked + .slider:before { transform: translateX(22px); }
Â  Â  .language-select { padding: 0.5rem; border-radius: 8px; border: 1px solid #ccc; background-color: var(--card-bg); color: var(--text-color); max-width: 150px; }
Â  Â  body.dark-mode .language-select { border-color: #555; }
Â  Â  .single-doa-arabic { font-size: 2rem; line-height: 3rem; text-align: right; direction: rtl; margin-bottom: 1.5rem; }
Â  Â  .single-doa-arti { font-size: 0.9rem; font-style: italic; color: #666; line-height: 1.5rem; }
Â  Â  body.dark-mode .single-doa-arti { color: #ccc; }
Â  </style>
</head>
<body>
Â  <nav id="sidebar">
Â  Â  <h3 data-key="nav_title">Menu Navigasi</h3>
Â  Â  <ul>
Â  Â  Â  <li><a href="#" id="prayer-times-btn">ğŸ•’ Jadwal Sholat</a></li>
Â  Â  Â  <li><a href="#" id="doa-harian-btn" data-key="nav_doa">ğŸ¤² Doa Harian</a></li>
Â  Â  Â  <li><a href="#" data-key="nav_quran">ğŸ“– Al-Qur'an</a></li>
Â  Â  Â  <li><a href="#" id="dzikir-btn" data-key="nav_dzikir">ğŸ“¿ Dzikir</a></li>
Â  Â  Â  <li><a href="#" data-key="nav_kiblat">ğŸ§­ Kiblat</a></li>
Â  Â  Â  <li><a href="#" id="settings-btn" data-key="nav_settings">âš™ï¸ Pengaturan</a></li>
Â  Â  </ul>
Â  </nav>

Â  <div class="app-container">
Â  Â  <div id="prayer-times-view" class="main-view">
Â  Â  Â  Â  <header class="main-header">
Â  Â  Â  Â  Â  <button id="menu-toggle"><span class="bar"></span><span class="bar"></span><span class="bar"></span></button>
Â  Â  Â  Â  Â  <div id="location-display"><span class="icon">ğŸ“</span><span id="city-name">Memuat...</span></div>
Â  Â  Â  Â  Â  <h1 id="next-prayer-name">Imsak</h1>
Â  Â  Â  Â  Â  <p data-key="remaining_time">Waktu Tersisa</p>
Â  Â  Â  Â  Â  <div id="countdown-timer">00:00:00</div>
Â  Â  Â  Â  </header>
Â  Â  Â  Â  <section class="calendar-section">
Â  Â  Â  Â  Â  <div class="date-header">
Â  Â  Â  Â  Â  Â  <span class="hijri-date" id="hijri-date-display">...</span>
Â  Â  Â  Â  Â  Â  <span class="gregorian-date" id="gregorian-date-display">...</span>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="calendar-view" id="calendar-view-container"></div>
Â  Â  Â  Â  </section>
Â  Â  Â  Â  <main class="prayer-list-section" id="prayer-list-container"></main>
Â  Â  Â  Â  <div style="text-align: center; padding: 20px; color: var(--text-light); font-weight: 500;">
Â  Â  Â  Â  Â  Â  Annur Islamic
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="doa-view" class="main-view" style="display: none;">
Â  Â  Â  Â  <div class="view-header">
Â  Â  Â  Â  Â  Â  <span class="back-button" data-target-view="prayer-times-view">â€¹</span>
Â  Â  Â  Â  Â  Â  <h2>Doa & Dzikir Harian</h2>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="last-read-card" id="last-read-doa-card">
Â  Â  Â  Â  Â  Â  <h3 data-key="last_read">TERAKHIR DIBACA</h3>
Â  Â  Â  Â  Â  Â  <p data-key="no_last_read">Belum ada doa yang dibaca</p>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="tabs-container">
Â  Â  Â  Â  Â  Â  <div class="tab-item active" data-tab="all" data-key="all_doa">Semua Doa</div>
Â  Â  Â  Â  Â  Â  <div class="tab-item" data-tab="bookmarked" data-key="bookmarked">Ditandai</div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="doa-list-container" id="doa-list-container-view"></div>
Â  Â  </div>

Â  Â  <div id="dzikir-view" class="main-view" style="display: none;">
Â  Â  Â  Â  <div class="view-header">
Â  Â  Â  Â  Â  Â  <span class="back-button" data-target-view="prayer-times-view">â€¹</span>
Â  Â  Â  Â  Â  Â  <h2>Tasbih Digital</h2>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="dzikir-list-container" id="dzikir-list-container">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  </div>
Â  </div>

Â  <div id="tasbih-view" class="main-view">
Â  Â  Â  <div class="view-header">
Â  Â  Â  Â  Â  <span class="back-button" data-target-view="dzikir-view">â€¹</span>
Â  Â  Â  Â  Â  <h2 id="tasbih-title">Nama Dzikir</h2>
Â  Â  Â  </div>
Â  Â  Â  <div class="tasbih-main">
Â  Â  Â  Â  Â  <div id="tasbih-counter-display">
Â  Â  Â  Â  Â  Â  Â  <div class="count" id="tasbih-current-count">0</div>
Â  Â  Â  Â  Â  Â  Â  <div class="target" id="tasbih-target-count">/ 33</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div id="tasbih-tap-area">
Â  Â  Â  Â  Â  Â  Â  <span class="tap-icon">ğŸ–ï¸</span>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <button id="tasbih-reset-btn">Reset</button>
Â  Â  Â  </div>
Â  </div>


Â  <div id="settings-modal" class="full-modal">
Â  Â  <div class="modal-content">
Â  Â  Â  <div class="modal-header">
Â  Â  Â  Â  Â  <h3 data-key="settings_title">Pengaturan</h3>
Â  Â  Â  Â  Â  <span class="close-button">&times;</span>
Â  Â  Â  </div>
Â  Â  Â  <div class="modal-body">
Â  Â  Â  Â  <div class="settings-item">
Â  Â  Â  Â  Â  <label for="dark-mode-toggle" data-key="settings_dark_mode">Mode Malam</label>
Â  Â  Â  Â  Â  <label class="switch"><input type="checkbox" id="dark-mode-toggle"><span class="slider"></span></label>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="settings-item">
Â  Â  Â  Â  Â  <label for="language-select" data-key="settings_language">Bahasa</label>
Â  Â  Â  Â  Â  <select name="language" id="language-select" class="language-select">
Â  Â  Â  Â  Â  Â  <option value="id">Bahasa Indonesia</option>
Â  Â  Â  Â  Â  Â  <option value="en">English</option>
Â  Â  Â  Â  Â  Â  <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Arabic)</option>
Â  Â  Â  Â  Â  Â  <option value="tr">TÃ¼rkÃ§e (Turkish)</option>
Â  Â  Â  Â  Â  Â  <option value="fr">FranÃ§ais (French)</option>
Â  Â  Â  Â  Â  Â  <option value="es">EspaÃ±ol (Spanish)</option>
Â  Â  Â  Â  Â  Â  <option value="de">Deutsch (German)</option>
Â  Â  Â  Â  Â  Â  <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹ (Russian)</option>
Â  Â  Â  Â  Â  Â  <option value="ur">Ø§Ø±Ø¯Ùˆ (Urdu)</option>
Â  Â  Â  Â  Â  Â  <option value="bn">à¦¬à¦¾à¦‚à¦²à¦¾ (Bengali)</option>
Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="settings-item">
Â  Â  Â  Â  Â  <label data-key="settings_about">Tentang Aplikasi</label>
Â  Â  Â  Â  Â  <span>v2.0.0 (Beta)</span>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </div>
Â  </div>

Â  <div id="single-doa-modal" class="full-modal">
Â  Â  <div class="modal-content">
Â  Â  Â  Â  <div class="modal-header">
Â  Â  Â  Â  Â  Â  <span class="close-button">&times;</span>
Â  Â  Â  Â  Â  Â  <h3 id="single-doa-modal-title">Detail Doa</h3>
Â  Â  Â  Â  Â  Â  <span class="action-icon" id="bookmark-doa-btn">â­</span>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="modal-body" id="single-doa-modal-body"></div>
Â  Â  </div>
Â  </div>

<script>
Â  Â  // --- DATA ---
Â  Â  const dzikirData = [
Â  Â  Â  { id: 'dzikir_1', title: 'Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡ØŒ Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ…', target: 100 },
Â  Â  Â  { id: 'dzikir_2', title: 'Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÙŠÙ…', target: 33 },
Â  Â  Â  { id: 'dzikir_3', title: 'Salawat', target: 33 },
Â  Â  Â  { id: 'dzikir_4', title: 'Allahu Akbar', target: 33 },
Â  Â  Â  { id: 'dzikir_5', title: 'La ilaha illallah', target: 33 },
Â  Â  Â  { id: 'dzikir_6', title: 'Alhamdulillah', target: 33 },
Â  Â  Â  { id: 'dzikir_7', title: 'Astaghfirullah', target: 33 },
Â  Â  ];

Â  Â  const doaHarianData = [
Â  Â  Â  Â  { id: 1, title: "Doa Bangun Tidur", subtitle: "Adab memulai hari", arabic: "Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø£ÙØ­Ù’ÙŠÙØ§Ù†ÙØ§ Ø¨ÙØ¹Ù’Ø¯Ù Ù…ÙØ§ Ø£ÙÙ…ÙØ§ØªÙÙ†ÙØ§ ÙˆÙØ¥ÙÙ„ÙÙŠÙ’Ù‡Ù Ø§Ù„Ù†ÙÙ‘Ø´ÙÙˆØ±Ù", arti: "Segala puji bagi Allah yang telah menghidupkan kami setelah mematikan kami, dan kepada-Nya lah kami akan dibangkitkan." },
Â  Â  Â  Â  { id: 2, title: "Doa Masuk Toilet", subtitle: "Memohon perlindungan", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙ Ù…ÙÙ†Ù Ø§Ù„Ù’Ø®ÙØ¨ÙØ«Ù ÙˆÙØ§Ù„Ù’Ø®ÙØ¨ÙØ§Ø¦ÙØ«Ù", arti: "Ya Allah, sesungguhnya aku berlindung kepada-Mu dari setan laki-laki dan setan perempuan." },
Â  Â  Â  Â  { id: 3, title: "Doa Keluar Toilet", subtitle: "Memohon ampunan", arabic: "ØºÙÙÙ’Ø±ÙØ§Ù†ÙÙƒÙ", arti: "Aku memohon ampunan-Mu." },
Â  Â  Â  Â  { id: 4, title: "Doa Sebelum Wudhu", subtitle: "Niat bersuci", arabic: "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù", arti: "Dengan menyebut nama Allah." },
Â  Â  Â  Â  { id: 5, title: "Doa Setelah Wudhu", subtitle: "Menyempurnakan wudhu", arabic: "Ø£ÙØ´Ù’Ù‡ÙØ¯Ù Ø£ÙÙ†Ù’ Ù„Ø§Ù Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„Ø§ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„Ø§Ù Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡Ù ÙˆÙØ£ÙØ´Ù’Ù‡ÙØ¯Ù Ø£ÙÙ†ÙÙ‘ Ù…ÙØ­ÙÙ…ÙÙ‘Ø¯Ù‹Ø§ Ø¹ÙØ¨Ù’Ø¯ÙÙ‡Ù ÙˆÙØ±ÙØ³ÙÙˆÙ„ÙÙ‡Ù", arti: "Aku bersaksi bahwa tiada Tuhan selain Allah semata, tiada sekutu bagi-Nya, dan aku bersaksi bahwa Muhammad adalah hamba dan utusan-Nya." },
Â  Â  Â  Â  { id: 6, title: "Doa Mengenakan Pakaian", subtitle: "Mensyukuri nikmat", arabic: "Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ ÙƒÙØ³ÙØ§Ù†ÙÙŠ Ù‡ÙØ°ÙØ§ ÙˆÙØ±ÙØ²ÙÙ‚ÙÙ†ÙÙŠÙ‡Ù Ù…ÙÙ†Ù’ ØºÙÙŠÙ’Ø±Ù Ø­ÙÙˆÙ’Ù„Ù Ù…ÙÙ†ÙÙ‘ÙŠ ÙˆÙÙ„Ø§Ù Ù‚ÙÙˆÙÙ‘Ø©Ù", arti: "Segala puji bagi Allah yang telah memberiku pakaian ini dan menganugerahkannya kepadaku tanpa daya dan kekuatan dariku." },
Â  Â  Â  Â  { id: 7, title: "Doa Melepas Pakaian", subtitle: "Adab melepas pakaian", arabic: "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù", arti: "Dengan menyebut nama Allah." },
Â  Â  Â  Â  { id: 8, title: "Doa Keluar Rumah", subtitle: "Memohon perlindungan", arabic: "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ØªÙÙˆÙÙƒÙÙ‘Ù„Ù’ØªÙ Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„Ø§Ù Ø­ÙÙˆÙ’Ù„Ù ÙˆÙÙ„Ø§Ù Ù‚ÙÙˆÙÙ‘Ø©Ù Ø¥ÙÙ„Ø§ÙÙ‘ Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù", arti: "Dengan nama Allah, aku bertawakal kepada Allah, tiada daya dan kekuatan kecuali dengan pertolongan Allah." },
Â  Â  Â  Â  { id: 9, title: "Doa Masuk Rumah", subtitle: "Memohon kebaikan", arabic: "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙÙ„ÙØ¬Ù’Ù†ÙØ§ ÙˆÙØ¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø®ÙØ±ÙØ¬Ù’Ù†ÙØ§ ÙˆÙØ¹ÙÙ„ÙÙ‰ Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ ØªÙÙˆÙÙƒÙÙ‘Ù„Ù’Ù†ÙØ§", arti: "Dengan nama Allah kami masuk, dan dengan nama Allah kami keluar, dan kepada Tuhan kami, kami bertawakal." },
Â  Â  Â  Â  { id: 10, title: "Doa Pergi ke Masjid", subtitle: "Langkah menuju kebaikan", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø§Ø¬Ù’Ø¹ÙÙ„Ù’ ÙÙÙŠ Ù‚ÙÙ„Ù’Ø¨ÙÙŠ Ù†ÙÙˆØ±Ù‹Ø§ ÙˆÙÙÙÙŠ Ù„ÙØ³ÙØ§Ù†ÙÙŠ Ù†ÙÙˆØ±Ù‹Ø§...", arti: "Ya Allah, jadikanlah cahaya di hatiku, cahaya di lidahku..." },
Â  Â  Â  Â  { id: 11, title: "Doa Masuk Masjid", subtitle: "Memohon rahmat", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø§ÙÙ’ØªÙØ­Ù’ Ù„ÙÙŠ Ø£ÙØ¨Ù’ÙˆÙØ§Ø¨Ù Ø±ÙØ­Ù’Ù…ÙØªÙÙƒÙ", arti: "Ya Allah, bukakanlah untukku pintu-pintu rahmat-Mu." },
Â  Â  Â  Â  { id: 12, title: "Doa Keluar Masjid", subtitle: "Memohon karunia", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ³Ù’Ø£ÙÙ„ÙÙƒÙ Ù…ÙÙ†Ù’ ÙÙØ¶Ù’Ù„ÙÙƒÙ", arti: "Ya Allah, sesungguhnya aku memohon kepada-Mu dari karunia-Mu." },
Â  Â  Â  Â  { id: 13, title: "Doa Sebelum Makan", subtitle: "Agar makanan berkah", arabic: "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù", arti: "Dengan menyebut nama Allah." },
Â  Â  Â  Â  { id: 14, title: "Doa Sesudah Makan", subtitle: "Tanda bersyukur", arabic: "Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø£ÙØ·Ù’Ø¹ÙÙ…ÙÙ†ÙÙŠ Ù‡ÙØ°ÙØ§ ÙˆÙØ±ÙZÙÙ‚ÙÙ†ÙÙŠÙ‡Ù Ù…ÙÙ†Ù’ ØºÙÙŠÙ’Ø±Ù Ø­ÙÙˆÙ’Ù„Ù Ù…ÙÙ†ÙÙ‘ÙŠ ÙˆÙÙ„Ø§Ù Ù‚ÙÙˆÙÙ‘Ø©Ù", arti: "Segala puji bagi Allah yang telah memberiku makanan ini dan menganugerahkannya kepadaku tanpa daya dan kekuatan dariku." },
Â  Â  Â  Â  { id: 15, title: "Doa Ketika Lupa Basmalah", subtitle: "Jika lupa di awal", arabic: "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙÙˆÙÙ‘Ù„ÙÙ‡Ù ÙˆÙØ¢Ø®ÙØ±ÙÙ‡Ù", arti: "Dengan nama Allah di awal dan di akhirnya." },
Â  Â  Â  Â  { id: 16, title: "Doa Minum Air Zamzam", subtitle: "Memohon kebaikan", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ³Ù’Ø£ÙÙ„ÙÙƒÙ Ø¹ÙÙ„Ù’Ù…Ù‹Ø§ Ù†ÙØ§ÙÙØ¹Ù‹Ø§ ÙˆÙØ±ÙØ²Ù’Ù‚Ù‹Ø§ ÙˆÙØ§Ø³ÙØ¹Ù‹Ø§ ÙˆÙØ´ÙÙÙØ§Ø¡Ù‹ Ù…ÙÙ†Ù’ ÙƒÙÙ„ÙÙ‘ Ø¯ÙØ§Ø¡Ù", arti: "Ya Allah, aku memohon kepada-Mu ilmu yang bermanfaat, rezeki yang luas, dan kesembuhan dari segala penyakit." },
Â  Â  Â  Â  { id: 17, title: "Doa Berbuka Puasa", subtitle: "Saat berbuka puasa", arabic: "Ø°ÙÙ‡ÙØ¨Ù Ø§Ù„Ø¸ÙÙ‘Ù…ÙØ£Ù ÙˆÙØ§Ø¨Ù’ØªÙÙ„ÙÙ‘ØªÙ Ø§Ù„Ù’Ø¹ÙØ±ÙÙˆÙ‚Ù ÙˆÙØ«ÙØ¨ÙØªÙ Ø§Ù„Ø£ÙØ¬Ù’Ø±Ù Ø¥ÙÙ†Ù’ Ø´ÙØ§Ø¡Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù", arti: "Telah hilang dahaga, telah basah urat-urat, dan telah tetap pahala, insya Allah." },
Â  Â  Â  Â  { id: 18, title: "Doa Sebelum Tidur", subtitle: "Adab mengakhiri hari", arabic: "Ø¨ÙØ§Ø³Ù’Ù…ÙÙƒÙ Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø£ÙÙ…ÙÙˆØªÙ ÙˆÙØ£ÙØ­Ù’ÙŠÙØ§", arti: "Dengan nama-Mu ya Allah aku mati dan aku hidup." },
Â  Â  Â  Â  { id: 19, title: "Doa Ketika Mimpi Buruk", subtitle: "Memohon perlindungan", arabic: "Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙÙ„ÙÙ…ÙØ§ØªÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„ØªÙÙ‘Ø§Ù…ÙÙ‘Ø§ØªÙ Ù…ÙÙ†Ù’ ØºÙØ¶ÙØ¨ÙÙ‡Ù ÙˆÙØ¹ÙÙ‚ÙØ§Ø¨ÙÙ‡Ù ÙˆÙØ´ÙØ±ÙÙ‘ Ø¹ÙØ¨ÙØ§Ø¯ÙÙ‡Ù...", arti: "Aku berlindung dengan kalimat-kalimat Allah yang sempurna dari kemurkaan-Nya, siksa-Nya, dan kejahatan hamba-hamba-Nya..." },
Â  Â  Â  Â  { id: 20, title: "Doa Naik Kendaraan", subtitle: "Memohon keselamatan", arabic: "Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø³ÙØ®ÙÙ‘Ø±Ù Ù„ÙÙ†ÙØ§ Ù‡ÙØ°ÙØ§ ÙˆÙÙ…ÙØ§ ÙƒÙÙ†ÙÙ‘Ø§ Ù„ÙÙ‡Ù Ù…ÙÙ‚Ù’Ø±ÙÙ†ÙÙŠÙ†Ù", arti: "Maha Suci Dzat yang telah menundukkan semua ini bagi kami padahal kami sebelumnya tidak mampu menguasainya." },
Â  Â  Â  Â  { id: 21, title: "Doa Safar (Bepergian)", subtitle: "Memohon kemudahan", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ù‡ÙÙˆÙÙ‘Ù†Ù’ Ø¹ÙÙ„ÙÙŠÙ’Ù†ÙØ§ Ø³ÙÙÙØ±ÙÙ†ÙØ§ Ù‡ÙØ°ÙØ§ ÙˆÙØ§Ø·Ù’ÙˆÙ Ø¹ÙÙ†ÙÙ‘Ø§ Ø¨ÙØ¹Ù’Ø¯ÙÙ‡Ù", arti: "Ya Allah, mudahkanlah perjalanan kami ini, dan dekatkanlah jaraknya bagi kami." },
Â  Â  Â  Â  { id: 22, title: "Doa Tiba di Tujuan", subtitle: "Rasa syukur", arabic: "Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø³ÙÙ„ÙÙ‘Ù…ÙÙ†ÙÙŠ", arti: "Segala puji bagi Allah yang telah menyelamatkanku." },
Â  Â  Â  Â  { id: 23, title: "Doa Menjenguk Orang Sakit", subtitle: "Mendoakan kesembuhan", arabic: "Ù„Ø§Ù Ø¨ÙØ£Ù’Ø³Ù Ø·ÙÙ‡ÙÙˆØ±ÙŒ Ø¥ÙÙ†Ù’ Ø´ÙØ§Ø¡Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù", arti: "Tidak mengapa, semoga menjadi pembersih (dosa), insya Allah." },
Â  Â  Â  Â  { id: 24, title: "Doa Ketika Hujan Turun", subtitle: "Memohon hujan bermanfaat", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ ØµÙÙŠÙÙ‘Ø¨Ù‹Ø§ Ù†ÙØ§ÙÙØ¹Ù‹Ø§", arti: "Ya Allah, (jadikanlah hujan ini) hujan yang bermanfaat." },
Â  Â  Â  Â  { id: 25, title: "Doa Setelah Hujan", subtitle: "Rahmat dari Allah", arabic: "Ù…ÙØ·ÙØ±Ù’Ù†ÙØ§ Ø¨ÙÙÙØ¶Ù’Ù„Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ±ÙØ­Ù’Ù…ÙØªÙÙ‡Ù", arti: "Kita diberi hujan karena karunia dan rahmat Allah." },
Â  Â  Â  Â  { id: 26, title: "Doa Melihat Petir", subtitle: "Tanda kebesaran Allah", arabic: "Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ ÙŠÙØ³ÙØ¨ÙÙ‘Ø­Ù Ø§Ù„Ø±ÙÙ‘Ø¹Ù’Ø¯Ù Ø¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡Ù ÙˆÙØ§Ù„Ù’Ù…ÙÙ„Ø§ÙØ¦ÙÙƒÙØ©Ù Ù…ÙÙ†Ù’ Ø®ÙÙŠÙÙØªÙÙ‡Ù", arti: "Maha Suci Dzat yang petir bertasbih dengan memuji-Nya, dan para malaikat pun (bertasbih) karena takut kepada-Nya." },
Â  Â  Â  Â  { id: 27, title: "Doa Ketika Angin Kencang", subtitle: "Memohon kebaikan", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ³Ù’Ø£ÙÙ„ÙÙƒÙ Ø®ÙÙŠÙ’Ø±ÙÙ‡ÙØ§ ÙˆÙØ£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙ Ù…ÙÙ†Ù’ Ø´ÙØ±ÙÙ‘Ù‡ÙØ§", arti: "Ya Allah, aku memohon kepada-Mu kebaikannya dan aku berlindung kepada-Mu dari keburukannya." },
Â  Â  Â  Â  { id: 28, title: "Doa Bercermin", subtitle: "Agar akhlak baik", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ ÙƒÙÙ…ÙØ§ Ø­ÙØ³ÙÙ‘Ù†Ù’ØªÙ Ø®ÙÙ„Ù’Ù‚ÙÙŠ ÙÙØ­ÙØ³ÙÙ‘Ù†Ù’ Ø®ÙÙ„ÙÙ‚ÙÙŠ", arti: "Ya Allah, sebagaimana Engkau telah memperindah rupaku, maka perindahlah akhlakku." },
Â  Â  Â  Â  { id: 29, title: "Doa untuk Kedua Orang Tua", subtitle: "Tanda bakti", arabic: "Ø±ÙØ¨ÙÙ‘ Ø§ØºÙ’ÙÙØ±Ù’ Ù„ÙÙŠ ÙˆÙÙ„ÙÙˆÙØ§Ù„ÙØ¯ÙÙŠÙÙ‘ ÙˆÙØ§Ø±Ù’Ø­ÙÙ…Ù’Ù‡ÙÙ…ÙØ§ ÙƒÙÙ…ÙØ§ Ø±ÙØ¨ÙÙ‘ÙŠÙØ§Ù†ÙÙŠ ØµÙØºÙÙŠØ±Ù‹Ø§", arti: "Wahai Tuhanku, ampunilah aku dan kedua orang tuaku, dan sayangilah mereka sebagaimana mereka telah menyayangiku di waktu kecil." },
Â  Â  Â  Â  { id: 30, title: "Doa Kebaikan Dunia Akhirat", subtitle: "Doa sapu jagat", arabic: "Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ Ø¢ØªÙÙ†ÙØ§ ÙÙÙŠ Ø§Ù„Ø¯ÙÙ‘Ù†Ù’ÙŠÙØ§ Ø­ÙØ³ÙÙ†ÙØ©Ù‹ ÙˆÙÙÙÙŠ Ø§Ù„Ø¢Ø®ÙØ±ÙØ©Ù Ø­ÙØ³ÙÙ†ÙØ©Ù‹ ÙˆÙÙ‚ÙÙ†ÙØ§ Ø¹ÙØ°ÙØ§Ø¨Ù Ø§Ù„Ù†ÙÙ‘Ø§Ø±Ù", arti: "Ya Tuhan kami, berilah kami kebaikan di dunia dan kebaikan di akhirat, dan peliharalah kami dari siksa neraka." },
Â  Â  Â  Â  { id: 31, title: "Doa Sebelum Belajar", subtitle: "Memohon ilmu", arabic: "Ø±ÙØ¨ÙÙ‘ Ø²ÙØ¯Ù’Ù†ÙÙŠ Ø¹ÙÙ„Ù’Ù…Ù‹Ø§", arti: "Wahai Tuhanku, tambahkanlah ilmu kepadaku." },
Â  Â  Â  Â  { id: 32, title: "Doa Sesudah Belajar", subtitle: "Agar ilmu bermanfaat", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø§Ù†Ù’ÙÙØ¹Ù’Ù†ÙÙŠ Ø¨ÙÙ…ÙØ§ Ø¹ÙÙ„ÙÙ‘Ù…Ù’ØªÙÙ†ÙÙŠ ÙˆÙØ¹ÙÙ„ÙÙ‘Ù…Ù’Ù†ÙÙŠ Ù…ÙØ§ ÙŠÙÙ†Ù’ÙÙØ¹ÙÙ†ÙÙŠ ÙˆÙØ²ÙØ¯Ù’Ù†ÙÙŠ Ø¹ÙÙ„Ù’Ù…Ù‹Ø§", arti: "Ya Allah, berilah manfaat atas apa yang telah Engkau ajarkan kepadaku, ajarilah aku apa yang bermanfaat bagiku, dan tambahkanlah ilmu kepadaku." },
Â  Â  Â  Â  { id: 33, title: "Doa Penutup Majelis", subtitle: "Kaffaratul Majlis", arabic: "Ø³ÙØ¨Ù’Ø­ÙØ§Ù†ÙÙƒÙ Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ ÙˆÙØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙƒÙ Ø£ÙØ´Ù’Ù‡ÙØ¯Ù Ø£ÙÙ†Ù’ Ù„Ø§Ù Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„Ø§ÙÙ‘ Ø£ÙÙ†Ù’ØªÙ Ø£ÙØ³Ù’ØªÙØºÙ’ÙÙØ±ÙÙƒÙ ÙˆÙØ£ÙØªÙÙˆØ¨Ù Ø¥ÙÙ„ÙÙŠÙ’ÙƒÙ", arti: "Maha Suci Engkau ya Allah, dan dengan memuji-Mu, aku bersaksi bahwa tiada Tuhan selain Engkau, aku memohon ampun dan bertaubat kepada-Mu." },
Â  Â  Â  Â  { id: 34, title: "Doa Ketika Bersin", subtitle: "Mengucap syukur", arabic: "Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù", arti: "Segala puji bagi Allah." },
Â  Â  Â  Â  { id: 35, title: "Jawaban Ketika Orang Bersin", subtitle: "Mendoakan saudara", arabic: "ÙŠÙØ±Ù’Ø­ÙÙ…ÙÙƒÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù", arti: "Semoga Allah merahmatimu." },
Â  Â  Â  Â  { id: 36, title: "Doa Ketika Marah", subtitle: "Meredam amarah", arabic: "Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙÙ†Ù Ø§Ù„Ø´ÙÙ‘ÙŠÙ’Ø·ÙØ§Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø¬ÙÙŠÙ…Ù", arti: "Aku berlindung kepada Allah dari setan yang terkutuk." },
Â  Â  Â  Â  { id: 37, title: "Doa Masuk Pasar", subtitle: "Memohon kebaikan pasar", arabic: "Ù„Ø§Ù Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„Ø§ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„Ø§Ù Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡Ù...", arti: "Tiada Tuhan selain Allah semata, tiada sekutu bagi-Nya..." },
Â  Â  Â  Â  { id: 38, title: "Doa Ketika Tertimpa Musibah", subtitle: "Kalimat istirja'", arabic: "Ø¥ÙÙ†ÙÙ‘Ø§ Ù„ÙÙ„ÙÙ‘Ù‡Ù ÙˆÙØ¥ÙÙ†ÙÙ‘Ø§ Ø¥ÙÙ„ÙÙŠÙ’Ù‡Ù Ø±ÙØ§Ø¬ÙØ¹ÙÙˆÙ†Ù", arti: "Sesungguhnya kami milik Allah dan kepada-Nya lah kami akan kembali." },
Â  Â  Â  Â  { id: 39, title: "Doa untuk Pengantin Baru", subtitle: "Mendoakan keberkahan", arabic: "Ø¨ÙØ§Ø±ÙÙƒÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙÙƒÙ ÙˆÙØ¨ÙØ§Ø±ÙÙƒÙ Ø¹ÙÙ„ÙÙŠÙ’ÙƒÙ ÙˆÙØ¬ÙÙ…ÙØ¹Ù Ø¨ÙÙŠÙ’Ù†ÙÙƒÙÙ…ÙØ§ ÙÙÙŠ Ø®ÙÙŠÙ’Ø±Ù", arti: "Semoga Allah memberkahimu, dan memberkahi atasmu, dan mengumpulkan kalian berdua dalam kebaikan." },
Â  Â  Â  Â  { id: 40, title: "Doa Ziarah Kubur", subtitle: "Salam kepada ahli kubur", arabic: "Ø§Ù„Ø³ÙÙ‘Ù„Ø§ÙÙ…Ù Ø¹ÙÙ„ÙÙ‰ Ø£ÙÙ‡Ù’Ù„Ù Ø§Ù„Ø¯ÙÙ‘ÙŠÙØ§Ø±Ù Ù…ÙÙ†Ù Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙŠÙ†Ù ÙˆÙØ§Ù„Ù’Ù…ÙØ³Ù’Ù„ÙÙ…ÙÙŠÙ†Ù...", arti: "Keselamatan atas penghuni kubur dari kaum mukminin dan muslimin..." },
Â  Â  Â  Â  { id: 41, title: "Doa Melihat Hilal", subtitle: "Menyambut bulan baru", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±ÙØŒ Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø£ÙÙ‡ÙÙ„ÙÙ‘Ù‡Ù Ø¹ÙÙ„ÙÙŠÙ’Ù†ÙØ§ Ø¨ÙØ§Ù„Ù’ÙŠÙÙ…Ù’Ù†Ù ÙˆÙØ§Ù„Ø¥ÙÙŠÙ…ÙØ§Ù†Ù ÙˆÙØ§Ù„Ø³ÙÙ‘Ù„Ø§ÙÙ…ÙØ©Ù ÙˆÙØ§Ù„Ø¥ÙØ³Ù’Ù„Ø§ÙÙ…Ù", arti: "Allah Maha Besar, ya Allah, tampakkanlah bulan itu kepada kami dengan membawa keberkahan dan keimanan, keselamatan dan Islam." },
Â  Â  Â  Â  { id: 42, title: "Doa Agar Diberi Kesabaran", subtitle: "Memohon keteguhan", arabic: "Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ Ø£ÙÙÙ’Ø±ÙØºÙ’ Ø¹ÙÙ„ÙÙŠÙ’Ù†ÙØ§ ØµÙØ¨Ù’Ø±Ù‹Ø§ ÙˆÙØ«ÙØ¨ÙÙ‘ØªÙ’ Ø£ÙÙ‚Ù’Ø¯ÙØ§Ù…ÙÙ†ÙØ§", arti: "Ya Tuhan kami, limpahkanlah kesabaran kepada kami dan kukuhkanlah pendirian kami." },
Â  Â  Â  Â  { id: 43, title: "Doa Mohon Petunjuk", subtitle: "Meminta bimbingan", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ³Ù’Ø£ÙÙ„ÙÙƒÙ Ø§Ù„Ù’Ù‡ÙØ¯ÙÙ‰ ÙˆÙØ§Ù„ØªÙÙ‘Ù‚ÙÙ‰ ÙˆÙØ§Ù„Ù’Ø¹ÙÙÙØ§ÙÙ ÙˆÙØ§Ù„Ù’ØºÙÙ†ÙÙ‰", arti: "Ya Allah, aku memohon kepada-Mu petunjuk, ketakwaan, kesucian diri, dan kecukupan." },
Â  Â  Â  Â  { id: 44, title: "Doa Terhindar dari Sifat Malas", subtitle: "Memohon semangat", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙ Ù…ÙÙ†Ù Ø§Ù„Ù’Ø¹ÙØ¬Ù’Ø²Ù ÙˆÙØ§Ù„Ù’ÙƒÙØ³ÙÙ„Ù", arti: "Ya Allah, aku berlindung kepada-Mu dari kelemahan dan kemalasan." },
Â  Â  Â  Â  { id: 45, title: "Doa Agar Diteguhkan Hati", subtitle: "Istiqamah dalam iman", arabic: "ÙŠÙØ§ Ù…ÙÙ‚ÙÙ„ÙÙ‘Ø¨Ù Ø§Ù„Ù’Ù‚ÙÙ„ÙÙˆØ¨Ù Ø«ÙØ¨ÙÙ‘ØªÙ’ Ù‚ÙÙ„Ù’Ø¨ÙÙŠ Ø¹ÙÙ„ÙÙ‰ Ø¯ÙÙŠÙ†ÙÙƒÙ", arti: "Wahai Dzat yang membolak-balikkan hati, teguhkanlah hatiku di atas agama-Mu." },
Â  Â  Â  Â  { id: 46, title: "Doa Memohon Ampunan & Rahmat", subtitle: "Permohonan ampunan", arabic: "Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ Ø¸ÙÙ„ÙÙ…Ù’Ù†ÙØ§ Ø£ÙÙ†Ù’ÙÙØ³ÙÙ†ÙØ§ ÙˆÙØ¥ÙÙ†Ù’ Ù„ÙÙ…Ù’ ØªÙØºÙ’ÙÙØ±Ù’ Ù„ÙÙ†ÙØ§ ÙˆÙØªÙØ±Ù’Ø­ÙÙ…Ù’Ù†ÙØ§ Ù„ÙÙ†ÙÙƒÙÙˆÙ†ÙÙ†ÙÙ‘ Ù…ÙÙ†Ù Ø§Ù„Ù’Ø®ÙØ§Ø³ÙØ±ÙÙŠÙ†Ù", arti: "Ya Tuhan kami, kami telah menzalimi diri kami sendiri, dan jika Engkau tidak mengampuni kami dan memberi rahmat kepada kami, niscaya kami termasuk orang-orang yang rugi." },
Â  Â  Â  Â  { id: 47, title: "Doa Saat Sulit Tidur", subtitle: "Agar tidur nyenyak", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ ØºÙØ§Ø±ÙØªÙ Ø§Ù„Ù†ÙÙ‘Ø¬ÙÙˆÙ…Ù ÙˆÙÙ‡ÙØ¯ÙØ£ÙØªÙ Ø§Ù„Ù’Ø¹ÙÙŠÙÙˆÙ†Ù...", arti: "Ya Allah, bintang-bintang telah terbenam, mata-mata telah terpejam..." },
Â  Â  Â  Â  { id: 48, title: "Doa Ketika Memulai Pekerjaan", subtitle: "Memohon kelancaran", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ³Ù’Ø£ÙÙ„ÙÙƒÙ Ù…ÙÙ†Ù’ Ø®ÙÙŠÙ’Ø±Ù Ù‡ÙØ°ÙØ§ Ø§Ù„Ù’Ø¹ÙÙ…ÙÙ„Ù ÙˆÙØ®ÙÙŠÙ’Ø±Ù Ù…ÙØ§ ÙÙÙŠÙ‡Ù", arti: "Ya Allah, aku memohon kepada-Mu kebaikan pekerjaan ini dan kebaikan yang ada di dalamnya." },
Â  Â  Â  Â  { id: 49, title: "Doa Setelah Selesai Bekerja", subtitle: "Rasa syukur", arabic: "Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø¨ÙÙ†ÙØ¹Ù’Ù…ÙØªÙÙ‡Ù ØªÙØªÙÙ…ÙÙ‘ Ø§Ù„ØµÙÙ‘Ø§Ù„ÙØ­ÙØ§ØªÙ", arti: "Segala puji bagi Allah yang dengan nikmat-Nya sempurnalah segala kebaikan." },
Â  Â  Â  Â  { id: 50, title: "Doa Ketika Mendengar Kabar Baik", subtitle: "Ekspresi kebahagiaan", arabic: "Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø¨ÙÙ†ÙØ¹Ù’Ù…ÙØªÙÙ‡Ù ØªÙØªÙÙ…ÙÙ‘ Ø§Ù„ØµÙÙ‘Ø§Ù„ÙØ­ÙØ§ØªÙ", arti: "Segala puji bagi Allah yang dengan nikmat-Nya sempurnalah segala kebaikan." },
Â  Â  Â  Â  { id: 51, title: "Doa Ketika Mendengar Kabar Buruk", subtitle: "Menjaga kesabaran", arabic: "Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø¹ÙÙ„ÙÙ‰ ÙƒÙÙ„ÙÙ‘ Ø­ÙØ§Ù„Ù", arti: "Segala puji bagi Allah atas segala keadaan." },
Â  Â  Â  Â  { id: 52, "title": "Doa Memohon Jodoh Terbaik", "subtitle": "Bagi yang belum menikah", "arabic": "Ø±ÙØ¨ÙÙ‘ Ù„Ø§Ù ØªÙØ°ÙØ±Ù’Ù†ÙÙŠ ÙÙØ±Ù’Ø¯Ù‹Ø§ ÙˆÙØ£ÙÙ†Ù’ØªÙ Ø®ÙÙŠÙ’Ø±Ù Ø§Ù„Ù’ÙˆÙØ§Ø±ÙØ«ÙÙŠÙ†Ù", "arti": "Ya Tuhanku, janganlah Engkau biarkan aku hidup seorang diri, dan Engkaulah pewaris yang paling baik." },
Â  Â  Â  Â  { id: 53, "title": "Doa Mohon Keturunan yang Baik", "subtitle": "Doa Nabi Zakaria", "arabic": "Ø±ÙØ¨ÙÙ‘ Ù‡ÙØ¨Ù’ Ù„ÙÙŠ Ù…ÙÙ†Ù’ Ù„ÙØ¯ÙÙ†Ù’ÙƒÙ Ø°ÙØ±ÙÙ‘ÙŠÙÙ‘Ø©Ù‹ Ø·ÙÙŠÙÙ‘Ø¨ÙØ©Ù‹ Ø¥ÙÙ†ÙÙ‘ÙƒÙ Ø³ÙÙ…ÙÙŠØ¹Ù Ø§Ù„Ø¯ÙÙ‘Ø¹ÙØ§Ø¡Ù", "arti": "Ya Tuhanku, berilah aku dari sisi-Mu seorang anak yang baik. Sesungguhnya Engkau Maha Pendengar doa." },
Â  Â  Â  Â  { id: 54, "title": "Doa Agar Terhindar dari Utang", "subtitle": "Memohon kecukupan", "arabic": "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø§ÙƒÙ’ÙÙÙ†ÙÙŠ Ø¨ÙØ­ÙÙ„Ø§ÙÙ„ÙÙƒÙ Ø¹ÙÙ†Ù’ Ø­ÙØ±ÙØ§Ù…ÙÙƒÙ ÙˆÙØ£ÙØºÙ’Ù†ÙÙ†ÙÙŠ Ø¨ÙÙÙØ¶Ù’Ù„ÙÙƒÙ Ø¹ÙÙ…ÙÙ‘Ù†Ù’ Ø³ÙÙˆÙØ§ÙƒÙ", "arti": "Ya Allah, cukupkanlah aku dengan yang halal dan jauhkanlah aku dari yang haram, dan cukupkanlah aku dengan karunia-Mu dari bergantung pada selain-Mu." }
Â  Â  ];
Â  Â Â 
Â  Â  const translations = {
Â  Â  Â  Â  'id': { 'nav_title': 'Menu Navigasi', 'nav_doa': 'ğŸ¤² Doa Harian', 'nav_quran': 'ğŸ“– Al-Qur\'an', 'nav_dzikir': 'ğŸ“¿ Dzikir', 'nav_kiblat': 'ğŸ§­ Kiblat', 'nav_settings': 'âš™ï¸ Pengaturan', 'remaining_time': 'Waktu Tersisa', 'settings_title': 'Pengaturan', 'settings_dark_mode': 'Mode Malam', 'settings_language': 'Bahasa', 'settings_about': 'Tentang Aplikasi', 'last_read': 'TERAKHIR DIBACA', 'no_last_read': 'Belum ada doa yang dibaca', 'all_doa': 'Semua Doa', 'bookmarked': 'Ditandai', 'Imsak': 'Imsak', 'Fajr': 'Subuh', 'Sunrise': 'Terbit', 'Dhuhr': 'Zuhur', 'Asr': 'Asar', 'Maghrib': 'Magrib', 'Isha': 'Isya\'', 'Imsak_desc': 'Notifikasi & Tanpa Suara Azan', 'Fajr_desc': 'Makkah #1 (Fajr)', 'Sunrise_desc': 'Notifikasi & Tanpa Suara Azan', 'Dhuhr_desc': 'Mishary Rashid', 'Asr_desc': 'Mishary Rashid', 'Maghrib_desc': 'Mishary Rashid', 'Isha_desc': 'Mishary Rashid' },
Â  Â  Â  Â  'en': { 'nav_title': 'Navigation Menu', 'nav_doa': 'ğŸ¤² Daily Prayers', 'nav_quran': 'ğŸ“– Al-Qur\'an', 'nav_dzikir': 'ğŸ“¿ Dhikr', 'nav_kiblat': 'ğŸ§­ Qibla', 'nav_settings': 'âš™ï¸ Settings', 'remaining_time': 'Time Remaining', 'settings_title': 'Settings', 'settings_dark_mode': 'Dark Mode', 'settings_language': 'Language', 'settings_about': 'About App', 'last_read': 'LAST READ', 'no_last_read': 'No prayers have been read yet', 'all_doa': 'All Prayers', 'bookmarked': 'Bookmarked', 'Imsak': 'Imsak', 'Fajr': 'Fajr', 'Sunrise': 'Sunrise', 'Dhuhr': 'Dhuhr', 'Asr': 'Asr', 'Maghrib': 'Maghrib', 'Isha': 'Isha', 'Imsak_desc': 'Notification & No Adhan Sound', 'Fajr_desc': 'Makkah #1 (Fajr)', 'Sunrise_desc': 'Notification & No Adhan Sound', 'Dhuhr_desc': 'Mishary Rashid', 'Asr_desc': 'Mishary Rashid', 'Maghrib_desc': 'Mishary Rashid', 'Isha_desc': 'Mishary Rashid' },
Â  Â  Â  Â  'ar': { 'nav_title': 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ†Ù‚Ù„', 'nav_doa': 'ğŸ¤² Ø£Ø¯Ø¹ÙŠØ© ÙŠÙˆÙ…ÙŠØ©', 'nav_quran': 'ğŸ“– Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…', 'nav_dzikir': 'ğŸ“¿ Ø£Ø°ÙƒØ§Ø±', 'nav_kiblat': 'ğŸ§­ Ø§Ù„Ù‚Ø¨Ù„Ø©', 'nav_settings': 'âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'remaining_time': 'Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ', 'settings_title': 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'settings_dark_mode': 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†', 'settings_language': 'Ø§Ù„Ù„ØºØ©', 'settings_about': 'Ø­ÙˆÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚', 'last_read': 'Ø¢Ø®Ø± Ù‚Ø±Ø§Ø¡Ø©', 'no_last_read': 'Ù„Ù… ØªØªÙ… Ù‚Ø±Ø§Ø¡Ø© Ø£ÙŠ Ø¯Ø¹Ø§Ø¡ Ø¨Ø¹Ø¯', 'all_doa': 'ÙƒÙ„ Ø§Ù„Ø£Ø¯Ø¹ÙŠØ©', 'bookmarked': 'Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'Imsak': 'Ø¥Ù…Ø³Ø§Ùƒ', 'Fajr': 'Ø§Ù„ÙØ¬Ø±', 'Sunrise': 'Ø§Ù„Ø´Ø±ÙˆÙ‚', 'Dhuhr': 'Ø§Ù„Ø¸Ù‡Ø±', 'Asr': 'Ø§Ù„Ø¹ØµØ±', 'Maghrib': 'Ø§Ù„Ù…ØºØ±Ø¨', 'Isha': 'Ø§Ù„Ø¹Ø´Ø§Ø¡', 'Imsak_desc': 'Ø¥Ø´Ø¹Ø§Ø± ÙˆØ¨Ø¯ÙˆÙ† ØµÙˆØª Ø£Ø°Ø§Ù†', 'Fajr_desc': 'Ù…ÙƒØ© #1 (Ø§Ù„ÙØ¬Ø±)', 'Sunrise_desc': 'Ø¥Ø´Ø¹Ø§Ø± ÙˆØ¨Ø¯ÙˆÙ† ØµÙˆØª Ø£Ø°Ø§Ù†', 'Dhuhr_desc': 'Ù…Ø´Ø§Ø±ÙŠ Ø±Ø§Ø´Ø¯', 'Asr_desc': 'Ù…Ø´Ø§Ø±ÙŠ Ø±Ø§Ø´Ø¯', 'Maghrib_desc': 'Ù…Ø´Ø§Ø±ÙŠ Ø±Ø§Ø´Ø¯', 'Isha_desc': 'Ù…Ø´Ø§Ø±ÙŠ Ø±Ø§Ø´Ø¯' },
Â  Â  Â  Â  'tr': { 'nav_title': 'Gezinme MenÃ¼sÃ¼', 'nav_doa': 'ğŸ¤² GÃ¼nlÃ¼k Dualar', 'nav_quran': 'ğŸ“– Kur\'an-Ä± Kerim', 'nav_dzikir': 'ğŸ“¿ Zikir', 'nav_kiblat': 'ğŸ§­ KÄ±ble', 'nav_settings': 'âš™ï¸ Ayarlar', 'remaining_time': 'Kalan SÃ¼re', 'settings_title': 'Ayarlar', 'settings_dark_mode': 'KaranlÄ±k Mod', 'settings_language': 'Dil', 'settings_about': 'Uygulama HakkÄ±nda', 'last_read': 'SON OKUNAN', 'no_last_read': 'HenÃ¼z dua okunmadÄ±', 'all_doa': 'TÃ¼m Dualar', 'bookmarked': 'Ä°ÅŸaretli', 'Imsak': 'Ä°msak', 'Fajr': 'Sabah', 'Sunrise': 'GÃ¼neÅŸ', 'Dhuhr': 'Ã–ÄŸle', 'Asr': 'Ä°kindi', 'Maghrib': 'AkÅŸam', 'Isha': 'YatsÄ±', 'Imsak_desc': 'Bildirim & Ezan Sesi Yok', 'Fajr_desc': 'Mekke #1 (Sabah)', 'Sunrise_desc': 'Bildirim & Ezan Sesi Yok', 'Dhuhr_desc': 'Mishary Rashid', 'Asr_desc': 'Mishary Rashid', 'Maghrib_desc': 'Mishary Rashid', 'Isha_desc': 'Mishary Rashid' },
Â  Â  Â  Â  'fr':{ 'nav_title': 'Menu de navigation', 'nav_doa': 'ğŸ¤² PriÃ¨res quotidiennes', 'nav_quran': 'ğŸ“– Al-Qur\'an', 'nav_dzikir': 'ğŸ“¿ Dhikr', 'nav_kiblat': 'ğŸ§­ Qibla', 'nav_settings': 'âš™ï¸ ParamÃ¨tres', 'remaining_time': 'Temps restant', 'settings_title': 'ParamÃ¨tres', 'settings_dark_mode': 'Mode sombre', 'settings_language': 'Langue', 'settings_about': 'Ã€ propos de l\'application', 'last_read': 'DERNIÃˆRE LECTURE', 'no_last_read': 'Aucune priÃ¨re n\'a Ã©tÃ© lue', 'all_doa': 'Toutes les priÃ¨res', 'bookmarked': 'MarquÃ©es', 'Imsak': 'Imsak', 'Fajr': 'Fajr', 'Sunrise': 'Lever du soleil', 'Dhuhr': 'Dhuhr', 'Asr': 'Asr', 'Maghrib': 'Maghrib', 'Isha': 'Isha', 'Imsak_desc': 'Notification & Pas de son Adhan', 'Fajr_desc': 'Makkah #1 (Fajr)', 'Sunrise_desc': 'Notification & Pas de son Adhan', 'Dhuhr_desc': 'Mishary Rashid', 'Asr_desc': 'Mishary Rashid', 'Maghrib_desc': 'Mishary Rashid', 'Isha_desc': 'Mishary Rashid' },
Â  Â  Â  Â  'es':{ 'nav_title': 'MenÃº de NavegaciÃ³n', 'nav_doa': 'ğŸ¤² Oraciones Diarias', 'nav_quran': 'ğŸ“– Al-CorÃ¡n', 'nav_dzikir': 'ğŸ“¿ Dhikr', 'nav_kiblat': 'ğŸ§­ Quibla', 'nav_settings': 'âš™ï¸ Ajustes', 'remaining_time': 'Tiempo Restante', 'settings_title': 'Ajustes', 'settings_dark_mode': 'Modo Oscuro', 'settings_language': 'Idioma', 'settings_about': 'Acerca de la AplicaciÃ³n', 'last_read': 'ÃšLTIMA LECTURA', 'no_last_read': 'No se han leÃ­do oraciones', 'all_doa': 'Todas las Oraciones', 'bookmarked': 'Marcadas', 'Imsak': 'Imsak', 'Fajr': 'Fajr', 'Sunrise': 'Amanecer', 'Dhuhr': 'Dhuhr', 'Asr': 'Asr', 'Maghrib': 'Maghrib', 'Isha': 'Isha', 'Imsak_desc': 'NotificaciÃ³n y sin sonido de Adhan', 'Fajr_desc': 'Makkah #1 (Fajr)', 'Sunrise_desc': 'NotificaciÃ³n y sin sonido de Adhan', 'Dhuhr_desc': 'Mishary Rashid', 'Asr_desc': 'Mishary Rashid', 'Maghrib_desc': 'Mishary Rashid', 'Isha_desc': 'Mishary Rashid' },
Â  Â  Â  Â  'de':{ 'nav_title': 'NavigationsmenÃ¼', 'nav_doa': 'ğŸ¤² TÃ¤gliche Gebete', 'nav_quran': 'ğŸ“– Al-Qur\'an', 'nav_dzikir': 'ğŸ“¿ Dhikr', 'nav_kiblat': 'ğŸ§­ Qibla', 'nav_settings': 'âš™ï¸ Einstellungen', 'remaining_time': 'Verbleibende Zeit', 'settings_title': 'Einstellungen', 'settings_dark_mode': 'Dunkelmodus', 'settings_language': 'Sprache', 'settings_about': 'Ãœber die App', 'last_read': 'ZULETZT GELESEN', 'no_last_read': 'Noch keine Gebete gelesen', 'all_doa': 'Alle Gebete', 'bookmarked': 'Markiert', 'Imsak': 'Imsak', 'Fajr': 'Fajr', 'Sunrise': 'Sonnenaufgang', 'Dhuhr': 'Dhuhr', 'Asr': 'Asr', 'Maghrib': 'Maghrib', 'Isha': 'Isha', 'Imsak_desc': 'Benachrichtigung & kein Adhan-Ton', 'Fajr_desc': 'Mekka #1 (Fajr)', 'Sunrise_desc': 'Benachrichtigung & kein Adhan-Ton', 'Dhuhr_desc': 'Mishary Rashid', 'Asr_desc': 'Mishary Rashid', 'Maghrib_desc': 'Mishary Rashid', 'Isha_desc': 'Mishary Rashid' },
Â  Â  Â  Â  'ru':{ 'nav_title': 'ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ', 'nav_doa': 'ğŸ¤² Ğ•Ğ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğµ Ğ¼Ğ¾Ğ»Ğ¸Ñ‚Ğ²Ñ‹', 'nav_quran': 'ğŸ“– ĞĞ»ÑŒ-ĞšĞ¾Ñ€Ğ°Ğ½', 'nav_dzikir': 'ğŸ“¿ Ğ—Ğ¸ĞºÑ€', 'nav_kiblat': 'ğŸ§­ ĞšĞ¸Ğ±Ğ»Ğ°', 'nav_settings': 'âš™ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸', 'remaining_time': 'ĞÑÑ‚Ğ°Ğ²ÑˆĞµĞµÑÑ Ğ²Ñ€ĞµĞ¼Ñ', 'settings_title': 'ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸', 'settings_dark_mode': 'Ğ¢ĞµĞ¼Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼', 'settings_language': 'Ğ¯Ğ·Ñ‹Ğº', 'settings_about': 'Ğ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸', 'last_read': 'ĞŸĞĞ¡Ğ›Ğ•Ğ”ĞĞ•Ğ• ĞŸĞ ĞĞ§Ğ¢Ğ•ĞĞ˜Ğ•', 'no_last_read': 'ĞœĞ¾Ğ»Ğ¸Ñ‚Ğ²Ñ‹ ĞµÑ‰Ğµ Ğ½Ğµ Ñ‡Ğ¸Ñ‚Ğ°Ğ»Ğ¸ÑÑŒ', 'all_doa': 'Ğ’ÑĞµ Ğ¼Ğ¾Ğ»Ğ¸Ñ‚Ğ²Ñ‹', 'bookmarked': 'Ğ’ Ğ·Ğ°ĞºĞ»Ğ°Ğ´ĞºĞ°Ñ…', 'Imsak': 'Ğ˜Ğ¼ÑĞ°Ğº', 'Fajr': 'Ğ¤Ğ°Ğ´Ğ¶Ñ€', 'Sunrise': 'Ğ’Ğ¾ÑÑ…Ğ¾Ğ´', 'Dhuhr': 'Ğ—ÑƒÑ…Ñ€', 'Asr': 'ĞÑÑ€', 'Maghrib': 'ĞœĞ°Ğ³Ñ€Ğ¸Ğ±', 'Isha': 'Ğ˜ÑˆĞ°', 'Imsak_desc': 'Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ±ĞµĞ· Ğ·Ğ²ÑƒĞºĞ° ĞĞ·Ğ°Ğ½Ğ°', 'Fajr_desc': 'ĞœĞµĞºĞºĞ° #1 (Ğ¤Ğ°Ğ´Ğ¶Ñ€)', 'Sunrise_desc': 'Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ±ĞµĞ· Ğ·Ğ²ÑƒĞºĞ° ĞĞ·Ğ°Ğ½Ğ°', 'Dhuhr_desc': 'ĞœĞ¸ÑˆĞ°Ñ€Ğ¸ Ğ Ğ°ÑˆĞ¸Ğ´', 'Asr_desc': 'ĞœĞ¸ÑˆĞ°Ñ€Ğ¸ Ğ Ğ°ÑˆĞ¸Ğ´', 'Maghrib_desc': 'ĞœĞ¸ÑˆĞ°Ñ€Ğ¸ Ğ Ğ°ÑˆĞ¸Ğ´', 'Isha_desc': 'ĞœĞ¸ÑˆĞ°Ñ€Ğ¸ Ğ Ğ°ÑˆĞ¸Ğ´' },
Â  Â  Â  Â  'ur':{ 'nav_title': 'Ù†ÛŒÙˆÛŒÚ¯ÛŒØ´Ù† Ù…ÛŒÙ†Ùˆ', 'nav_doa': 'ğŸ¤² Ø±ÙˆØ²Ø§Ù†Û Ú©ÛŒ Ø¯Ø¹Ø§Ø¦ÛŒÚº', 'nav_quran': 'ğŸ“– Ø§Ù„Ù‚Ø±Ø¢Ù†', 'nav_dzikir': 'ğŸ“¿ Ø°Ú©Ø±', 'nav_kiblat': 'ğŸ§­ Ù‚Ø¨Ù„Û', 'nav_settings': 'âš™ï¸ ØªØ±ØªÛŒØ¨Ø§Øª', 'remaining_time': 'Ø¨Ø§Ù‚ÛŒ ÙˆÙ‚Øª', 'settings_title': 'ØªØ±ØªÛŒØ¨Ø§Øª', 'settings_dark_mode': 'ÚˆØ§Ø±Ú© Ù…ÙˆÚˆ', 'settings_language': 'Ø²Ø¨Ø§Ù†', 'settings_about': 'Ø§ÛŒÙ¾ Ú©Û’ Ø¨Ø§Ø±Û’ Ù…ÛŒÚº', 'last_read': 'Ø¢Ø®Ø±ÛŒ Ø¨Ø§Ø± Ù¾Ú‘Ú¾Ø§', 'no_last_read': 'Ú©ÙˆØ¦ÛŒ Ø¯Ø¹Ø§ Ù†ÛÛŒÚº Ù¾Ú‘Ú¾ÛŒ Ú¯Ø¦ÛŒ', 'all_doa': 'ØªÙ…Ø§Ù… Ø¯Ø¹Ø§Ø¦ÛŒÚº', 'bookmarked': 'Ù†Ø´Ø§Ù† Ø²Ø¯Û', 'Imsak': 'Ø§Ù…Ø³Ø§Ú©', 'Fajr': 'ÙØ¬Ø±', 'Sunrise': 'Ø·Ù„ÙˆØ¹ Ø¢ÙØªØ§Ø¨', 'Dhuhr': 'Ø¸ÛØ±', 'Asr': 'Ø¹ØµØ±', 'Maghrib': 'Ù…ØºØ±Ø¨', 'Isha': 'Ø¹Ø´Ø§Ø¡', 'Imsak_desc': 'Ø§Ø·Ù„Ø§Ø¹ Ø§ÙˆØ± Ø§Ø°Ø§Ù† Ú©ÛŒ Ø¢ÙˆØ§Ø² Ù†ÛÛŒÚº', 'Fajr_desc': 'Ù…Ú©Û #1 (ÙØ¬Ø±)', 'Sunrise_desc': 'Ø§Ø·Ù„Ø§Ø¹ Ø§ÙˆØ± Ø§Ø°Ø§Ù† Ú©ÛŒ Ø¢ÙˆØ§Ø² Ù†ÛÛŒÚº', 'Dhuhr_desc': 'Ù…Ø´Ø§Ø±ÛŒ Ø±Ø§Ø´Ø¯', 'Asr_desc': 'Ù…Ø´Ø§Ø±ÛŒ Ø±Ø§Ø´Ø¯', 'Maghrib_desc': 'Ù…Ø´Ø§Ø±ÛŒ Ø±Ø§Ø´Ø¯', 'Isha_desc': 'Ù…Ø´Ø§Ø±ÛŒ Ø±Ø§Ø´Ø¯' },
Â  Â  Â  Â  'bn':{ 'nav_title': 'à¦¨à§‡à¦­à¦¿à¦—à§‡à¦¶à¦¨ à¦®à§‡à¦¨à§', 'nav_doa': 'ğŸ¤² à¦¦à§ˆà¦¨à¦¿à¦• à¦¦à§‹à¦¯à¦¼à¦¾', 'nav_quran': 'ğŸ“– à¦†à¦²-à¦•à§à¦°à¦†à¦¨', 'nav_dzikir': 'ğŸ“¿ à¦¯à¦¿à¦•à¦¿à¦°', 'nav_kiblat': 'ğŸ§­ à¦•à¦¿à¦¬à¦²à¦¾', 'nav_settings': 'âš™ï¸ à¦¸à§‡à¦Ÿà¦¿à¦‚à¦¸', 'remaining_time': 'à¦¬à¦¾à¦•à¦¿ à¦¸à¦®à¦¯à¦¼', 'settings_title': 'à¦¸à§‡à¦Ÿà¦¿à¦‚à¦¸', 'settings_dark_mode': 'à¦¡à¦¾à¦°à§à¦• à¦®à§‹à¦¡', 'settings_language': 'à¦­à¦¾à¦·à¦¾', 'settings_about': 'à¦…à§à¦¯à¦¾à¦ª à¦¸à¦®à§à¦ªà¦°à§à¦•à§‡', 'last_read': 'à¦¶à§‡à¦· à¦ªà¦ à¦¿à¦¤', 'no_last_read': 'à¦à¦–à¦¨à¦“ à¦•à§‹à¦¨ à¦¦à§‹à¦¯à¦¼à¦¾ à¦ªà¦¡à¦¼à¦¾ à¦¹à¦¯à¦¼à¦¨à¦¿', 'all_doa': 'à¦¸à¦®à¦¸à§à¦¤ à¦¦à§‹à¦¯à¦¼à¦¾', 'bookmarked': 'à¦¬à§à¦•à¦®à¦¾à¦°à§à¦• à¦•à¦°à¦¾', 'Imsak': 'à¦‡Ù…Ø³à¦¾à¦•', 'Fajr': 'à¦«à¦œà¦°', 'Sunrise': 'à¦¸à§‚à¦°à§à¦¯à§‹à¦¦à¦¯à¦¼', 'Dhuhr': 'à¦¯à§‹à¦¹à¦°', 'Asr': 'à¦†à¦¸à¦°', 'Maghrib': 'à¦®à¦¾à¦—à¦°à¦¿à¦¬', 'Isha': 'à¦‡à¦¶à¦¾', 'Imsak_desc': 'à¦¬à¦¿à¦œà§à¦à¦ªà§à¦¤à¦¿ à¦à¦¬à¦‚ à¦†à¦¯à¦¾à¦¨à§‡à¦° à¦¶à¦¬à§à¦¦ à¦¨à§‡à¦‡', 'Fajr_desc': 'à¦®à¦•à§à¦•à¦¾ #1 (à¦«à¦œà¦°)', 'Sunrise_desc': 'à¦¬à¦¿à¦œà§à¦à¦ªà§à¦¤à¦¿ à¦à¦¬à¦‚ à¦†à¦¯à¦¾à¦¨à§‡à¦° à¦¶à¦¬à§à¦¦ à¦¨à§‡à¦‡', 'Dhuhr_desc': 'à¦®à¦¿à¦¶à¦¾à¦°à¦¿ à¦°à¦¶à¦¿à¦¦', 'Asr_desc': 'à¦®à¦¿à¦¶à¦¾à¦°à¦¿ à¦°à¦¶à¦¿à¦¦', 'Maghrib_desc': 'à¦®à¦¿à¦¶à¦¾à¦°à¦¿ à¦°à¦¶à¦¿à¦¦', 'Isha_desc': 'à¦®à¦¿à¦¶à¦¾à¦°à¦¿ à¦°à¦¶à¦¿à¦¦' },
Â  Â  };
Â  Â Â 
Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  Â  // --- GLOBAL VARIABLES & STATE ---
Â  Â  Â  Â  let currentLanguage = 'id';
Â  Â  Â  Â  let countdownInterval;
Â  Â  Â  Â  let bookmarkedDoas = JSON.parse(localStorage.getItem('bookmarked_doas')) || [];
Â  Â  Â  Â  let lastReadDoaId = localStorage.getItem('last_read_doa_id');
Â  Â  Â  Â  let currentOpenDoaId = null;
Â  Â  Â  Â  window.latestPrayerTimes = null;

Â  Â  Â  Â  let dzikirState = JSON.parse(localStorage.getItem('dzikir_state')) || {};
Â  Â  Â  Â  let currentDzikirId = null;

Â  Â  Â  Â  // --- ELEMENT SELECTORS ---
Â  Â  Â  Â  const sidebar = document.getElementById('sidebar');
Â  Â  Â  Â  const menuToggle = document.getElementById('menu-toggle');
Â  Â  Â  Â  const views = document.querySelectorAll('.main-view');
Â  Â  Â  Â  const prayerTimesBtn = document.getElementById('prayer-times-btn');
Â  Â  Â  Â  const doaHarianBtn = document.getElementById('doa-harian-btn');
Â  Â  Â  Â  const dzikirBtn = document.getElementById('dzikir-btn');
Â  Â  Â  Â  const settingsBtn = document.getElementById('settings-btn');
Â  Â  Â  Â  const doaListContainer = document.getElementById('doa-list-container-view');
Â  Â  Â  Â  const lastReadCard = document.getElementById('last-read-doa-card');
Â  Â  Â  Â  const lastReadCardText = lastReadCard.querySelector('p');
Â  Â  Â  Â  const singleDoaModal = document.getElementById('single-doa-modal');
Â  Â  Â  Â  const settingsModal = document.getElementById('settings-modal');

Â  Â  Â  Â  const dzikirListContainer = document.getElementById('dzikir-list-container');
Â  Â  Â  Â  const tasbihView = document.getElementById('tasbih-view');
Â  Â  Â  Â  const tasbihTitle = document.getElementById('tasbih-title');
Â  Â  Â  Â  const tasbihCurrentCount = document.getElementById('tasbih-current-count');
Â  Â  Â  Â  const tasbihTargetCount = document.getElementById('tasbih-target-count');
Â  Â  Â  Â  const tasbihTapArea = document.getElementById('tasbih-tap-area');
Â  Â  Â  Â  const tasbihResetBtn = document.getElementById('tasbih-reset-btn');

Â  Â  Â  Â  // --- CORE APP LOGIC ---

Â  Â  Â  Â  function showView(viewId) {
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.main-view, .full-modal').forEach(v => {
Â  Â  Â  Â  Â  Â  Â  Â  if (v.id !== 'tasbih-view') v.style.display = 'none';
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  const isTasbih = viewId === 'tasbih-view';
Â  Â  Â  Â  Â  Â  const targetView = document.getElementById(viewId);
Â  Â  Â  Â  Â  Â  if (isTasbih) {
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelector('.app-container').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  tasbihView.style.display = 'flex';
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelector('.app-container').style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  tasbihView.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  if (targetView) targetView.style.display = 'block';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  const prayerView = document.getElementById('prayer-times-view');
Â  Â  Â  Â  Â  Â  menuToggle.style.display = (prayerView && prayerView.style.display === 'block') ? 'flex' : 'none';
Â  Â  Â  Â  }

Â  Â  Â  Â  function closeSidebar() {
Â  Â  Â  Â  Â  Â  menuToggle.classList.remove('open');
Â  Â  Â  Â  Â  Â  sidebar.classList.remove('open');
Â  Â  Â  Â  }

Â  Â  Â  Â  function setupNavigation() {
Â  Â  Â  Â  Â  Â  prayerTimesBtn.addEventListener('click', (e) => { e.preventDefault(); showView('prayer-times-view'); closeSidebar(); });
Â  Â  Â  Â  Â  Â  doaHarianBtn.addEventListener('click', (e) => { e.preventDefault(); showView('doa-view'); renderDoaListView('all'); closeSidebar(); });
Â  Â  Â  Â  Â  Â  dzikirBtn.addEventListener('click', (e) => { e.preventDefault(); showView('dzikir-view'); renderDzikirList(); closeSidebar(); });
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.back-button').forEach(btn => {
Â  Â  Â  Â  Â  Â  Â  Â  btn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const targetViewId = btn.getAttribute('data-target-view');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showView(targetViewId);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (targetViewId === 'dzikir-view') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderDzikirList();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  _PERBAIKAN DIMULAI DI SINI_
Â  Â  Â  Â  // --- PRAYER TIMES FEATURE ---
Â  Â  Â  Â  const prayerUIData = { Imsak: { icon: 'â€”', checkable: false }, Fajr: { icon: 'â€”', checkable: true }, Sunrise: { icon: 'â€”', checkable: false }, Dhuhr: { icon: 'â€”', checkable: true }, Asr: { icon: 'â€”', checkable: true }, Maghrib: { icon: 'â€”', checkable: true }, Isha: { icon: 'â€”', checkable: true } };

Â  Â  Â  Â  function adjustTimeByTwoMinutes(timeString) {
Â  Â  Â  Â  Â  Â  const [h, m] = timeString.split(':').map(Number);
Â  Â  Â  Â  Â  Â  const date = new Date();
Â  Â  Â  Â  Â  Â  date.setHours(h, m + 2, 0, 0);Â 
Â  Â  Â  Â  Â  Â  return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;
Â  Â  Â  Â  }

Â  Â  Â  Â  function generateCalendar() {
Â  Â  Â  Â  Â  Â  const calendarContainerEl = document.getElementById('calendar-view-container');
Â  Â  Â  Â  Â  Â  const dayNamesList = { id: ["Min", "Sen", "Sel", "Rab", "Kam", "Jum", "Sab"], en: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], ar: ["Ø£Ø­Ø¯", "Ø¥Ø«Ù†", "Ø«Ù„Ø§", "Ø£Ø±Ø¨", "Ø®Ù…ÙŠ", "Ø¬Ù…Ø¹", "Ø³Ø¨Øª"], tr: ["Paz", "Pzt", "Sal", "Ã‡ar", "Per", "Cum", "Cmt"], fr: ["Dim", "Lun", "Mar", "Mer", "Jeu", "Ven", "Sam"], es: ["Dom", "Lun", "Mar", "MiÃ©", "Jue", "Vie", "SÃ¡b"], de: ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"], ru: ["Ğ’Ñ", "ĞŸĞ½", "Ğ’Ñ‚", "Ğ¡Ñ€", "Ğ§Ñ‚", "ĞŸÑ‚", "Ğ¡Ğ±"], ur: ["Ø§ØªÙˆØ§Ø±", "Ù¾ÛŒØ±", "Ù…Ù†Ú¯Ù„", "Ø¨Ø¯Ú¾", "Ø¬Ù…Ø¹Ø±Ø§Øª", "Ø¬Ù…Ø¹Û", "ÛÙØªÛ"], bn: ["à¦°à¦¬à¦¿", "à¦¸à§‹à¦®", "à¦®à¦™à§à¦—à¦²", "à¦¬à§à¦§", "à¦¬à§ƒà¦¹", "à¦¶à§à¦•à§à¦°", "à¦¶à¦¨à¦¿"] };
Â  Â  Â  Â  Â  Â  const today = new Date();
Â  Â  Â  Â  Â  Â  const todayDayIndex = today.getDay();
Â  Â  Â  Â  Â  Â  let calendarHtml = '';
Â  Â  Â  Â  Â  Â  for (let i = 0; i < 7; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const date = new Date();
Â  Â  Â  Â  Â  Â  Â  Â  date.setDate(today.getDate() - (todayDayIndex - i));
Â  Â  Â  Â  Â  Â  Â  Â  const isToday = i === todayDayIndex;
Â  Â  Â  Â  Â  Â  Â  Â  calendarHtml += `<div class="day ${isToday ? 'today' : ''}"><span class="day-name">${dayNamesList[currentLanguage][i] || dayNamesList['id'][i]}</span><span class="day-number">${date.getDate()}</span></div>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (calendarContainerEl) calendarContainerEl.innerHTML = calendarHtml;
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderPrayerTimes(prayerTimes) {
Â  Â  Â  Â  Â  Â  const prayerListContainerEl = document.getElementById('prayer-list-container');
Â  Â  Â  Â  Â  Â  if (!prayerListContainerEl) return;
Â  Â  Â  Â  Â  Â  prayerListContainerEl.innerHTML = '';
Â  Â  Â  Â  Â  Â  let prayerHtml = '';
Â  Â  Â  Â  Â  Â  const prayerOrder = ['Imsak', 'Fajr', 'Sunrise', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];
Â  Â  Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  Â  Â  const isAfterResetTime = now.getHours() >= 22;
Â  Â  Â  Â  Â  Â  prayerOrder.forEach(key => {
Â  Â  Â  Â  Â  Â  Â  Â  if (prayerTimes[key]) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const ui = prayerUIData[key];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const prayerDate = new Date(`${now.toDateString()} ${prayerTimes[key]}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let iconToShow = ui.icon;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (ui.checkable) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isAfterResetTime) iconToShow = 'â€”';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (now > prayerDate) iconToShow = 'âœ”';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  prayerHtml += `<div class="prayer-item"><span class="icon-status">${iconToShow}</span><div class="prayer-details"><div class="prayer-name">${translations[currentLanguage][key] || key}</div><div class="prayer-desc">${translations[currentLanguage][`${key}_desc`] || key}</div></div><div class="prayer-time-action"><div class="prayer-time">${prayerTimes[key]}</div><div class="prayer-action">ğŸ”Š</div></div></div>`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  prayerListContainerEl.innerHTML = prayerHtml;
Â  Â  Â  Â  }

Â  Â  Â  Â  function startCountdown(prayerTimes) {
Â  Â  Â  Â  Â  Â  if (countdownInterval) clearInterval(countdownInterval);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const prayerOrder = ['Imsak', 'Fajr', 'Sunrise', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  function update() {
Â  Â  Â  Â  Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  Â  Â  Â  Â  let nextPrayerTime, nextPrayerName;

Â  Â  Â  Â  Â  Â  Â  Â  for (const name of prayerOrder) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const prayerDate = new Date(`${now.toDateString()} ${prayerTimes[name]}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (prayerDate > now) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextPrayerTime = prayerDate;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextPrayerName = name;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (!nextPrayerTime) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const tomorrow = new Date(now);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tomorrow.setDate(now.getDate() + 1);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextPrayerTime = new Date(`${tomorrow.toDateString()} ${prayerTimes['Imsak']}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextPrayerName = 'Imsak';
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  const diff = nextPrayerTime - now;
Â  Â  Â  Â  Â  Â  Â  Â  if (diff < 0) return;

Â  Â  Â  Â  Â  Â  Â  Â  const h = String(Math.floor(diff / 3600000)).padStart(2, '0');
Â  Â  Â  Â  Â  Â  Â  Â  const m = String(Math.floor((diff % 3600000) / 60000)).padStart(2, '0');
Â  Â  Â  Â  Â  Â  Â  Â  const s = String(Math.floor((diff % 60000) / 1000)).padStart(2, '0');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('countdown-timer').textContent = `${h}:${m}:${s}`;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('next-prayer-name').textContent = translations[currentLanguage][nextPrayerName] || nextPrayerName;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  update();
Â  Â  Â  Â  Â  Â  countdownInterval = setInterval(update, 1000);
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateDates() {
Â  Â  Â  Â  Â  Â  const hijriMonths = ["Muharram", "Safar", "Rabiul Awal", "Rabiul Akhir", "Jumadil Awal", "Jumadil Akhir", "Rajab", "Syaban", "Ramadhan", "Syawal", "Zulkaidah", "Zulhijah"];
Â  Â  Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  Â  Â  const localeMap = { id: 'id-ID', en: 'en-US', ar: 'ar-SA', tr: 'tr-TR', fr: 'fr-FR', es: 'es-ES', de: 'de-DE', ru: 'ru-RU', ur: 'ur-PK', bn: 'bn-BD' };
Â  Â  Â  Â  Â  Â  const locale = localeMap[currentLanguage] || 'en-US';
Â  Â  Â  Â  Â  Â  document.getElementById('gregorian-date-display').textContent = now.toLocaleDateString(locale, { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });
Â  Â  Â  Â  Â  Â  const hijriFmt = new Intl.DateTimeFormat('en-TN-u-ca-islamic', { day: 'numeric', month: 'numeric', year: 'numeric' });
Â  Â  Â  Â  Â  Â  const parts = hijriFmt.formatToParts(now);
Â  Â  Â  Â  Â  Â  const d = parts.find(p => p.type === 'day').value;
Â  Â  Â  Â  Â  Â  const m = parseInt(parts.find(p => p.type === 'month').value);
Â  Â  Â  Â  Â  Â  const y = parts.find(p => p.type === 'year').value.split(' ')[0];
Â  Â  Â  Â  Â  Â  document.getElementById('hijri-date-display').textContent = `${d} ${hijriMonths[m-1]} ${y} H`;
Â  Â  Â  Â  }

Â  Â  Â  Â  function fetchCityName(lat, lon) {
Â  Â  Â  Â  Â  Â  fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`).then(r => r.json()).then(data => {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('city-name').textContent = data.address.city || data.address.town || data.address.village || "Lokasi tidak dikenal";
Â  Â  Â  Â  Â  Â  }).catch(console.error);
Â  Â  Â  Â  }

Â  Â  Â  Â  function fetchPrayerTimings(lat, lon) {
Â  Â  Â  Â  Â  Â  const ts = Math.floor(Date.now() / 1000);
Â  Â  Â  Â  Â  Â  fetch(`https://api.aladhan.com/v1/timings/${ts}?latitude=${lat}&longitude=${lon}&method=11`).then(r => r.json()).then(j => {
Â  Â  Â  Â  Â  Â  Â  Â  if (j.code === 200) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const originalTimings = j.data.timings;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const adjustedTimings = {};

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (const key in originalTimings) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  adjustedTimings[key] = adjustTimeByTwoMinutes(originalTimings[key]);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.latestPrayerTimes = adjustedTimings;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderPrayerTimes(adjustedTimings);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  startCountdown(adjustedTimings);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }).catch(console.error);
Â  Â  Â  Â  }

Â  Â  Â  Â  function getLocation() {
Â  Â  Â  Â  Â  Â  const fallbackLat = 3.5952, fallbackLon = 98.6722; // Medan

Â  Â  Â  Â  Â  Â  if (navigator.geolocation) {
Â  Â  Â  Â  Â  Â  Â  Â  navigator.geolocation.getCurrentPosition(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // --- Bagian Sukses ---
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (position) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchPrayerTimings(position.coords.latitude, position.coords.longitude);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchCityName(position.coords.latitude, position.coords.longitude);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // --- Bagian Error (Yang Diperbaiki) ---
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (error) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchPrayerTimings(fallbackLat, fallbackLon);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchCityName(fallbackLat, fallbackLon);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let alertMessage = "";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  switch(error.code) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case error.PERMISSION_DENIED:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertMessage = "Izin lokasi ditolak oleh pengguna. Menampilkan jadwal & lokasi untuk Medan.";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case error.POSITION_UNAVAILABLE:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertMessage = "Informasi lokasi tidak tersedia saat ini. Menampilkan jadwal & lokasi untuk Medan.";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case error.TIMEOUT:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertMessage = "Waktu permintaan lokasi habis. Menampilkan jadwal & lokasi untuk Medan.";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case error.UNKNOWN_ERROR:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertMessage = "Terjadi kesalahan yang tidak diketahui saat mengambil lokasi. Menampilkan jadwal & lokasi untuk Medan.";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertMessage) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert(alertMessage);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  fetchPrayerTimings(fallbackLat, fallbackLon);
Â  Â  Â  Â  Â  Â  Â  Â  fetchCityName(fallbackLat, fallbackLon);
Â  Â  Â  Â  Â  Â  Â  Â  alert("Browser tidak mendukung lokasi. Menampilkan jadwal & lokasi untuk Medan.");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  // _PERBAIKAN SELESAI DI SINI_

Â  Â  Â  Â  // --- DOA HARIAN FEATURE ---
Â  Â  Â  Â  function setupDoaHarian() {
Â  Â  Â  Â  Â  Â  function renderDoaListView(filter) {
Â  Â  Â  Â  Â  Â  Â  Â  doaListContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  let filteredData = (filter === 'bookmarked') ? doaHarianData.filter(doa => bookmarkedDoas.includes(doa.id)) : doaHarianData;
Â  Â  Â  Â  Â  Â  Â  Â  if (filteredData.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  doaListContainer.innerHTML = `<p style="text-align:center; margin-top: 2rem; color: var(--text-light);">Belum ada doa yang ditandai.</p>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  filteredData.forEach(doa => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const item = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.className = 'doa-list-item';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.innerHTML = `<span class="num">${doa.id}</span><div class="details"><div class="title">${doa.title}</div><div class="subtitle">${doa.subtitle}</div></div><span class="arabic">${doa.arabic.split(' ')[0]}...</span>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.addEventListener('click', () => showSingleDoa(doa.id));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  doaListContainer.appendChild(item);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  function showSingleDoa(doaId) {
Â  Â  Â  Â  Â  Â  Â  Â  const doa = doaHarianData.find(d => d.id === doaId);
Â  Â  Â  Â  Â  Â  Â  Â  if (!doa) return;
Â  Â  Â  Â  Â  Â  Â  Â  currentOpenDoaId = doa.id;
Â  Â  Â  Â  Â  Â  Â  Â  singleDoaModal.querySelector('#single-doa-modal-title').textContent = doa.title;
Â  Â  Â  Â  Â  Â  Â  Â  singleDoaModal.querySelector('#single-doa-modal-body').innerHTML = `<p class="single-doa-arabic">${doa.arabic}</p><p class="single-doa-arti"><b>Artinya:</b> ${doa.arti}</p>`;
Â  Â  Â  Â  Â  Â  Â  Â  updateBookmarkIcon();
Â  Â  Â  Â  Â  Â  Â  Â  singleDoaModal.style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('last_read_doa_id', doa.id);
Â  Â  Â  Â  Â  Â  Â  Â  lastReadDoaId = doa.id;
Â  Â  Â  Â  Â  Â  Â  Â  renderLastRead();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  function renderLastRead() {
Â  Â  Â  Â  Â  Â  Â  Â  if (lastReadDoaId) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const doa = doaHarianData.find(d => d.id == lastReadDoaId);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lastReadCardText.textContent = doa ? doa.title : (translations[currentLanguage].no_last_read || 'No prayers have been read yet');
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lastReadCardText.textContent = translations[currentLanguage].no_last_read || 'No prayers have been read yet';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  lastReadCard.addEventListener('click', () => { if (lastReadDoaId) showSingleDoa(parseInt(lastReadDoaId)); });
Â  Â  Â  Â  Â  Â  function updateBookmarkIcon() { singleDoaModal.querySelector('#bookmark-doa-btn').classList.toggle('bookmarked', bookmarkedDoas.includes(currentOpenDoaId)); }
Â  Â  Â  Â  Â  Â  singleDoaModal.querySelector('#bookmark-doa-btn').addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  const index = bookmarkedDoas.indexOf(currentOpenDoaId);
Â  Â  Â  Â  Â  Â  Â  Â  if (index > -1) bookmarkedDoas.splice(index, 1);
Â  Â  Â  Â  Â  Â  Â  Â  else bookmarkedDoas.push(currentOpenDoaId);
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('bookmarked_doas', JSON.stringify(bookmarkedDoas));
Â  Â  Â  Â  Â  Â  Â  Â  updateBookmarkIcon();
Â  Â  Â  Â  Â  Â  Â  Â  if (document.querySelector('.tab-item.active').dataset.tab === 'bookmarked') renderDoaListView('bookmarked');
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.tab-item').forEach(tab => {
Â  Â  Â  Â  Â  Â  Â  Â  tab.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.querySelector('.tab-item.active').classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tab.classList.add('active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderDoaListView(tab.dataset.tab);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  singleDoaModal.querySelector('.close-button').addEventListener('click', () => singleDoaModal.style.display = 'none');
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- DZIKIR & TASBIH FEATURE ---
Â  Â  Â  Â  function saveDzikirState() {
Â  Â  Â  Â  Â  Â  localStorage.setItem('dzikir_state', JSON.stringify(dzikirState));
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderDzikirList() {
Â  Â  Â  Â  Â  Â  dzikirListContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  dzikirData.forEach(dzikir => {
Â  Â  Â  Â  Â  Â  Â  Â  const state = dzikirState[dzikir.id] || { count: 0, lap: 0, lastUpdate: 'Belum pernah' };
Â  Â  Â  Â  Â  Â  Â  Â  const item = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  item.className = 'dzikir-item';
Â  Â  Â  Â  Â  Â  Â  Â  item.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="dzikir-item-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="title">${dzikir.title}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="timestamp">${state.lastUpdate}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="dzikir-item-progress">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="count">${state.count}/${dzikir.target}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="lap">${state.lap} Putaran</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  Â  Â  Â  Â  item.addEventListener('click', () => showTasbihView(dzikir.id));
Â  Â  Â  Â  Â  Â  Â  Â  dzikirListContainer.appendChild(item);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function showTasbihView(id) {
Â  Â  Â  Â  Â  Â  currentDzikirId = id;
Â  Â  Â  Â  Â  Â  const dzikir = dzikirData.find(d => d.id === id);
Â  Â  Â  Â  Â  Â  const state = dzikirState[id] || { count: 0, lap: 0 };
Â  Â  Â  Â  Â  Â  tasbihTitle.textContent = dzikir.title;
Â  Â  Â  Â  Â  Â  tasbihCurrentCount.textContent = state.count;
Â  Â  Â  Â  Â  Â  tasbihTargetCount.textContent = `/ ${dzikir.target}`;
Â  Â  Â  Â  Â  Â  showView('tasbih-view');
Â  Â  Â  Â  }

Â  Â  Â  Â  function setupDzikir() {
Â  Â  Â  Â  Â  Â  tasbihTapArea.addEventListener('click', () => {
Â  Â  Â  Â  Â  _PERBAIKAN DIMULAI DI SINI_
Â  Â  Â  Â  // --- PRAYER TIMES FEATURE ---
Â  Â  Â  Â  const prayerUIData = { Imsak: { icon: 'â€”', checkable: false }, Fajr: { icon: 'â€”', checkable: true }, Sunrise: { icon: 'â€”', checkable: false }, Dhuhr: { icon: 'â€”', checkable: true }, Asr: { icon: 'â€”', checkable: true }, Maghrib: { icon: 'â€”', checkable: true }, Isha: { icon: 'â€”', checkable: true } };

Â  Â  Â  Â  function adjustTimeByTwoMinutes(timeString) {
Â  Â  Â  Â  Â  Â  const [h, m] = timeString.split(':').map(Number);
Â  Â  Â  Â  Â  Â  const date = new Date();
Â  Â  Â  Â  Â  Â  date.setHours(h, m + 2, 0, 0);Â 
Â  Â  Â  Â  Â  Â  return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;
Â  Â  Â  Â  }

Â  Â  Â  Â  function generateCalendar() {
Â  Â  Â  Â  Â  Â  const calendarContainerEl = document.getElementById('calendar-view-container');
Â  Â  Â  Â  Â  Â  const dayNamesList = { id: ["Min", "Sen", "Sel", "Rab", "Kam", "Jum", "Sab"], en: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], ar: ["Ø£Ø­Ø¯", "Ø¥Ø«Ù†", "Ø«Ù„Ø§", "Ø£Ø±Ø¨", "Ø®Ù…ÙŠ", "Ø¬Ù…Ø¹", "Ø³Ø¨Øª"], tr: ["Paz", "Pzt", "Sal", "Ã‡ar", "Per", "Cum", "Cmt"], fr: ["Dim", "Lun", "Mar", "Mer", "Jeu", "Ven", "Sam"], es: ["Dom", "Lun", "Mar", "MiÃ©", "Jue", "Vie", "SÃ¡b"], de: ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"], ru: ["Ğ’Ñ", "ĞŸĞ½", "Ğ’Ñ‚", "Ğ¡Ñ€", "Ğ§Ñ‚", "ĞŸÑ‚", "Ğ¡Ğ±"], ur: ["Ø§ØªÙˆØ§Ø±", "Ù¾ÛŒØ±", "Ù…Ù†Ú¯Ù„", "Ø¨Ø¯Ú¾", "Ø¬Ù…Ø¹Ø±Ø§Øª", "Ø¬Ù…Ø¹Û", "ÛÙØªÛ"], bn: ["à¦°à¦¬à¦¿", "à¦¸à§‹à¦®", "à¦®à¦™à§à¦—à¦²", "à¦¬à§à¦§", "à¦¬à§ƒà¦¹", "à¦¶à§à¦•à§à¦°", "à¦¶à¦¨à¦¿"] };
Â  Â  Â  Â  Â  Â  const today = new Date();
Â  Â  Â  Â  Â  Â  const todayDayIndex = today.getDay();
Â  Â  Â  Â  Â  Â  let calendarHtml = '';
Â  Â  Â  Â  Â  Â  for (let i = 0; i < 7; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const date = new Date();
Â  Â  Â  Â  Â  Â  Â  Â  date.setDate(today.getDate() - (todayDayIndex - i));
Â  Â  Â  Â  Â  Â  Â  Â  const isToday = i === todayDayIndex;
Â  Â  Â  Â  Â  Â  Â  Â  calendarHtml += `<div class="day ${isToday ? 'today' : ''}"><span class="day-name">${dayNamesList[currentLanguage][i] || dayNamesList['id'][i]}</span><span class="day-number">${date.getDate()}</span></div>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (calendarContainerEl) calendarContainerEl.innerHTML = calendarHtml;
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderPrayerTimes(prayerTimes) {
Â  Â  Â  Â  Â  Â  const prayerListContainerEl = document.getElementById('prayer-list-container');
Â  Â  Â  Â  Â  Â  if (!prayerListContainerEl) return;
Â  Â  Â  Â  Â  Â  prayerListContainerEl.innerHTML = '';
Â  Â  Â  Â  Â  Â  let prayerHtml = '';
Â  Â  Â  Â  Â  Â  const prayerOrder = ['Imsak', 'Fajr', 'Sunrise', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];
Â  Â  Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  Â  Â  const isAfterResetTime = now.getHours() >= 22;
Â  Â  Â  Â  Â  Â  prayerOrder.forEach(key => {
Â  Â  Â  Â  Â  Â  Â  Â  if (prayerTimes[key]) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const ui = prayerUIData[key];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const prayerDate = new Date(`${now.toDateString()} ${prayerTimes[key]}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let iconToShow = ui.icon;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (ui.checkable) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isAfterResetTime) iconToShow = 'â€”';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (now > prayerDate) iconToShow = 'âœ”';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  prayerHtml += `<div class="prayer-item"><span class="icon-status">${iconToShow}</span><div class="prayer-details"><div class="prayer-name">${translations[currentLanguage][key] || key}</div><div class="prayer-desc">${translations[currentLanguage][`${key}_desc`] || key}</div></div><div class="prayer-time-action"><div class="prayer-time">${prayerTimes[key]}</div><div class="prayer-action">ğŸ”Š</div></div></div>`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  prayerListContainerEl.innerHTML = prayerHtml;
Â  Â  Â  Â  }

Â  Â  Â  Â  function startCountdown(prayerTimes) {
Â  Â  Â  Â  Â  Â  if (countdownInterval) clearInterval(countdownInterval);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const prayerOrder = ['Imsak', 'Fajr', 'Sunrise', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  function update() {
Â  Â  Â  Â  Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  Â  Â  Â  Â  let nextPrayerTime, nextPrayerName;

Â  Â  Â  Â  Â  Â  Â  Â  for (const name of prayerOrder) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const prayerDate = new Date(`${now.toDateString()} ${prayerTimes[name]}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (prayerDate > now) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextPrayerTime = prayerDate;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextPrayerName = name;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (!nextPrayerTime) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const tomorrow = new Date(now);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tomorrow.setDate(now.getDate() + 1);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextPrayerTime = new Date(`${tomorrow.toDateString()} ${prayerTimes['Imsak']}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextPrayerName = 'Imsak';
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  const diff = nextPrayerTime - now;
Â  Â  Â  Â  Â  Â  Â  Â  if (diff < 0) return;

Â  Â  Â  Â  Â  Â  Â  Â  const h = String(Math.floor(diff / 3600000)).padStart(2, '0');
Â  Â  Â  Â  Â  Â  Â  Â  const m = String(Math.floor((diff % 3600000) / 60000)).padStart(2, '0');
Â  Â  Â  Â  Â  Â  Â  Â  const s = String(Math.floor((diff % 60000) / 1000)).padStart(2, '0');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('countdown-timer').textContent = `${h}:${m}:${s}`;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('next-prayer-name').textContent = translations[currentLanguage][nextPrayerName] || nextPrayerName;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  update();
Â  Â  Â  Â  Â  Â  countdownInterval = setInterval(update, 1000);
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateDates() {
Â  Â  Â  Â  Â  Â  const hijriMonths = ["Muharram", "Safar", "Rabiul Awal", "Rabiul Akhir", "Jumadil Awal", "Jumadil Akhir", "Rajab", "Syaban", "Ramadhan", "Syawal", "Zulkaidah", "Zulhijah"];
Â  Â  Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  Â  Â  const localeMap = { id: 'id-ID', en: 'en-US', ar: 'ar-SA', tr: 'tr-TR', fr: 'fr-FR', es: 'es-ES', de: 'de-DE', ru: 'ru-RU', ur: 'ur-PK', bn: 'bn-BD' };
Â  Â  Â  Â  Â  Â  const locale = localeMap[currentLanguage] || 'en-US';
Â  Â  Â  Â  Â  Â  document.getElementById('gregorian-date-display').textContent = now.toLocaleDateString(locale, { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });
Â  Â  Â  Â  Â  Â  const hijriFmt = new Intl.DateTimeFormat('en-TN-u-ca-islamic', { day: 'numeric', month: 'numeric', year: 'numeric' });
Â  Â  Â  Â  Â  Â  const parts = hijriFmt.formatToParts(now);
Â  Â  Â  Â  Â  Â  const d = parts.find(p => p.type === 'day').value;
Â  Â  Â  Â  Â  Â  const m = parseInt(parts.find(p => p.type === 'month').value);
Â  Â  Â  Â  Â  Â  const y = parts.find(p => p.type === 'year').value.split(' ')[0];
Â  Â  Â  Â  Â  Â  document.getElementById('hijri-date-display').textContent = `${d} ${hijriMonths[m-1]} ${y} H`;
Â  Â  Â  Â  }

Â  Â  Â  Â  function fetchCityName(lat, lon) {
Â  Â  Â  Â  Â  Â  fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`).then(r => r.json()).then(data => {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('city-name').textContent = data.address.city || data.address.town || data.address.village || "Lokasi tidak dikenal";
Â  Â  Â  Â  Â  Â  }).catch(console.error);
Â  Â  Â  Â  }

Â  Â  Â  Â  function fetchPrayerTimings(lat, lon) {
Â  Â  Â  Â  Â  Â  const ts = Math.floor(Date.now() / 1000);
Â  Â  Â  Â  Â  Â  fetch(`https://api.aladhan.com/v1/timings/${ts}?latitude=${lat}&longitude=${lon}&method=11`).then(r => r.json()).then(j => {
Â  Â  Â  Â  Â  Â  Â  Â  if (j.code === 200) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const originalTimings = j.data.timings;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const adjustedTimings = {};

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (const key in originalTimings) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  adjustedTimings[key] = adjustTimeByTwoMinutes(originalTimings[key]);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.latestPrayerTimes = adjustedTimings;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderPrayerTimes(adjustedTimings);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  startCountdown(adjustedTimings);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }).catch(console.error);
Â  Â  Â  Â  }

Â  Â  Â  Â  function getLocation() {
Â  Â  Â  Â  Â  Â  const fallbackLat = 3.5952, fallbackLon = 98.6722; // Medan

Â  Â  Â  Â  Â  Â  if (navigator.geolocation) {
Â  Â  Â  Â  Â  Â  Â  Â  navigator.geolocation.getCurrentPosition(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // --- Bagian Sukses ---
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (position) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchPrayerTimings(position.coords.latitude, position.coords.longitude);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchCityName(position.coords.latitude, position.coords.longitude);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // --- Bagian Error (Yang Diperbaiki) ---
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (error) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchPrayerTimings(fallbackLat, fallbackLon);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchCityName(fallbackLat, fallbackLon);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let alertMessage = "";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  switch(error.code) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case error.PERMISSION_DENIED:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertMessage = "Izin lokasi ditolak oleh pengguna. Menampilkan jadwal & lokasi untuk Medan.";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case error.POSITION_UNAVAILABLE:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertMessage = "Informasi lokasi tidak tersedia saat ini. Menampilkan jadwal & lokasi untuk Medan.";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case error.TIMEOUT:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertMessage = "Waktu permintaan lokasi habis. Menampilkan jadwal & lokasi untuk Medan.";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case error.UNKNOWN_ERROR:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertMessage = "Terjadi kesalahan yang tidak diketahui saat mengambil lokasi. Menampilkan jadwal & lokasi untuk Medan.";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertMessage) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert(alertMessage);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  fetchPrayerTimings(fallbackLat, fallbackLon);
Â  Â  Â  Â  Â  Â  Â  Â  fetchCityName(fallbackLat, fallbackLon);
Â  Â  Â  Â  Â  Â  Â  Â  alert("Browser tidak mendukung lokasi. Menampilkan jadwal & lokasi untuk Medan.");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- DOA HARIAN FEATURE ---
Â  Â  Â  Â  function setupDoaHarian() {
Â  Â  Â  Â  Â  Â  function renderDoaListView(filter) {
Â  Â  Â  Â  Â  Â  Â  Â  doaListContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  let filteredData = (filter === 'bookmarked') ? doaHarianData.filter(doa => bookmarkedDoas.includes(doa.id)) : doaHarianData;
Â  Â  Â  Â  Â  Â  Â  Â  if (filteredData.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  doaListContainer.innerHTML = `<p style="text-align:center; margin-top: 2rem; color: var(--text-light);">Belum ada doa yang ditandai.</p>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  filteredData.forEach(doa => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const item = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.className = 'doa-list-item';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.innerHTML = `<span class="num">${doa.id}</span><div class="details"><div class="title">${doa.title}</div><div class="subtitle">${doa.subtitle}</div></div><span class="arabic">${doa.arabic.split(' ')[0]}...</span>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.addEventListener('click', () => showSingleDoa(doa.id));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  doaListContainer.appendChild(item);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  function showSingleDoa(doaId) {
Â  Â  Â  Â  Â  Â  Â  Â  const doa = doaHarianData.find(d => d.id === doaId);
Â  Â  Â  Â  Â  Â  Â  Â  if (!doa) return;
Â  Â  Â  Â  Â  Â  Â  Â  currentOpenDoaId = doa.id;
Â  Â  Â  Â  Â  Â  Â  Â  singleDoaModal.querySelector('#single-doa-modal-title').textContent = doa.title;
Â  Â  Â  Â  Â  Â  Â  Â  singleDoaModal.querySelector('#single-doa-modal-body').innerHTML = `<p class="single-doa-arabic">${doa.arabic}</p><p class="single-doa-arti"><b>Artinya:</b> ${doa.arti}</p>`;
Â  Â  Â  Â  Â  Â  Â  Â  updateBookmarkIcon();
Â  Â  Â  Â  Â  Â  Â  Â  singleDoaModal.style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('last_read_doa_id', doa.id);
Â  Â  Â  Â  Â  Â  Â  Â  lastReadDoaId = doa.id;
Â  Â  Â  Â  Â  Â  Â  Â  renderLastRead();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  function renderLastRead() {
Â  Â  Â  Â  Â  Â  Â  Â  if (lastReadDoaId) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const doa = doaHarianData.find(d => d.id == lastReadDoaId);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lastReadCardText.textContent = doa ? doa.title : (translations[currentLanguage].no_last_read || 'No prayers have been read yet');
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lastReadCardText.textContent = translations[currentLanguage].no_last_read || 'No prayers have been read yet';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  lastReadCard.addEventListener('click', () => { if (lastReadDoaId) showSingleDoa(parseInt(lastReadDoaId)); });
Â  Â  Â  Â  Â  Â  function updateBookmarkIcon() { singleDoaModal.querySelector('#bookmark-doa-btn').classList.toggle('bookmarked', bookmarkedDoas.includes(currentOpenDoaId)); }
Â  Â  Â  Â  Â  Â  singleDoaModal.querySelector('#bookmark-doa-btn').addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  const index = bookmarkedDoas.indexOf(currentOpenDoaId);
Â  Â  Â  Â  Â  Â  Â  Â  if (index > -1) bookmarkedDoas.splice(index, 1);
Â  Â  Â  Â  Â  Â  Â  Â  else bookmarkedDoas.push(currentOpenDoaId);
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('bookmarked_doas', JSON.stringify(bookmarkedDoas));
Â  Â  Â  Â  Â  Â  Â  Â  updateBookmarkIcon();
Â  Â  Â  Â  Â  Â  Â  Â  if (document.querySelector('.tab-item.active').dataset.tab === 'bookmarked') renderDoaListView('bookmarked');
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.tab-item').forEach(tab => {
Â  Â  Â  Â  Â  Â  Â  Â  tab.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.querySelector('.tab-item.active').classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tab.classList.add('active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderDoaListView(tab.dataset.tab);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  singleDoaModal.querySelector('.close-button').addEventListener('click', () => singleDoaModal.style.display = 'none');
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- DZIKIR & TASBIH FEATURE ---
Â  Â  Â  Â  function saveDzikirState() {
Â  Â  Â  Â  Â  Â  localStorage.setItem('dzikir_state', JSON.stringify(dzikirState));
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderDzikirList() {
Â  Â  Â  Â  Â  Â  dzikirListContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  dzikirData.forEach(dzikir => {
Â  Â  Â  Â  Â  Â  Â  Â  const state = dzikirState[dzikir.id] || { count: 0, lap: 0, lastUpdate: 'Belum pernah' };
Â  Â  Â  Â  Â  Â  Â  Â  const item = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  item.className = 'dzikir-item';
Â  Â  Â  Â  Â  Â  Â  Â  item.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="dzikir-item-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="title">${dzikir.title}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="timestamp">${state.lastUpdate}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="dzikir-item-progress">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="count">${state.count}/${dzikir.target}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="lap">${state.lap} Putaran</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  Â  Â  Â  Â  item.addEventListener('click', () => showTasbihView(dzikir.id));
Â  Â  Â  Â  Â  Â  Â  Â  dzikirListContainer.appendChild(item);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function showTasbihView(id) {
Â  Â  Â  Â  Â  Â  currentDzikirId = id;
Â  Â  Â  Â  Â  Â  const dzikir = dzikirData.find(d => d.id === id);
Â  Â  Â  Â  Â  Â  const state = dzikirState[id] || { count: 0, lap: 0 };
Â  Â  Â  Â  Â  Â  tasbihTitle.textContent = dzikir.title;
Â  Â  Â  Â  Â  Â  tasbihCurrentCount.textContent = state.count;
Â  Â  Â  Â  Â  Â  tasbihTargetCount.textContent = `/ ${dzikir.target}`;
Â  Â  Â  Â  Â  Â  showView('tasbih-view');
Â  Â  Â  Â  }

Â  Â  Â  Â  function setupDzikir() {
Â  Â  Â  Â  Â  Â  tasbihTapArea.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  if (!currentDzikirId) return;
Â  Â  Â  Â  Â  Â  Â  Â  const dzikir = dzikirData.find(d => d.id === currentDzikirId);
Â  Â  Â  Â  Â  Â  Â  Â  let state = dzikirState[currentDzikirId];
Â  Â  Â  Â  Â  Â  Â  Â  if (!state) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state = { count: 0, lap: 0 };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dzikirState[currentDzikirId] = state;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  state.count++;
Â  Â  Â  Â  Â  Â  Â  Â  if (state.count > dzikir.target) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.count = 1;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.lap++;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  state.lastUpdate = new Date().toLocaleString('id-ID', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' });
Â  Â  Â  Â  Â  Â  Â  Â  tasbihCurrentCount.textContent = state.count;
Â  Â  Â  Â  Â  Â  Â  Â  saveDzikirState();
Â  Â  Â  Â  Â  Â  Â  Â  if (navigator.vibrate) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  navigator.vibrate(50);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  tasbihResetBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  if (!currentDzikirId) return;
Â  Â  Â  Â  Â  Â  Â  Â  dzikirState[currentDzikirId].count = 0;
Â  Â  Â  Â  Â  Â  Â  Â  dzikirState[currentDzikirId].lap = 0;
Â  Â  Â  Â  Â  Â  Â  Â  tasbihCurrentCount.textContent = 0;
Â  Â  Â  Â  Â  Â  Â  Â  saveDzikirState();
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  // --- NOTIFICATION FEATURE ---
Â  Â  Â  Â  function setupNotifications() {
Â  Â  Â  Â  Â  Â  if (!("Notification" in window)) {
Â  Â  Â  Â  Â  Â  Â  Â  console.log("Browser ini tidak mendukung notifikasi desktop");
Â  Â  Â  Â  Â  Â  } else if (Notification.permission === "granted") {
Â  Â  Â  Â  Â  Â  Â  Â  console.log("Izin notifikasi sudah diberikan.");
Â  Â  Â  Â  Â  Â  } else if (Notification.permission !== "denied") {
Â  Â  Â  Â  Â  Â  Â  Â  Notification.requestPermission().then(function (permission) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (permission === "granted") {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Izin notifikasi diberikan.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  new Notification("Terima kasih! Notifikasi telah diaktifkan.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- SETTINGS & LANGUAGE ---
Â  Â  Â  Â  function setLanguage(lang) {
Â  Â  Â  Â  Â  Â  currentLanguage = lang;
Â  Â  Â  Â  Â  Â  document.querySelectorAll('[data-key]').forEach(el => {
Â  Â  Â  Â  Â  Â  Â  Â  if (translations[lang] && translations[lang][el.dataset.key]) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  el.textContent = translations[lang][el.dataset.key];
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  updateDates();
Â  Â  Â  Â  Â  Â  generateCalendar();
Â  Â  Â  Â  Â  Â  if (window.latestPrayerTimes) {
Â  Â  Â  Â  Â  Â  Â  Â  renderPrayerTimes(window.latestPrayerTimes);
Â  Â  Â  Â  Â  Â  Â  Â  startCountdown(window.latestPrayerTimes);
Â  Â  Â  _PERBAIKAN DIMULAI DI SINI_
Â  Â  Â  Â  // --- PRAYER TIMES FEATURE ---
Â  Â  Â  Â  const prayerUIData = { Imsak: { icon: 'â€”', checkable: false }, Fajr: { icon: 'â€”', checkable: true }, Sunrise: { icon: 'â€”', checkable: false }, Dhuhr: { icon: 'â€”', checkable: true }, Asr: { icon: 'â€”', checkable: true }, Maghrib: { icon: 'â€”', checkable: true }, Isha: { icon: 'â€”', checkable: true } };

Â  Â  Â  Â  function adjustTimeByTwoMinutes(timeString) {
Â  Â  Â  Â  Â  Â  const [h, m] = timeString.split(':').map(Number);
Â  Â  Â  Â  Â  Â  const date = new Date();
Â  Â  Â  Â  Â  Â  date.setHours(h, m + 2, 0, 0);Â 
Â  Â  Â  Â  Â  Â  return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;
Â  Â  Â  Â  }

Â  Â  Â  Â  function generateCalendar() {
Â  Â  Â  Â  Â  Â  const calendarContainerEl = document.getElementById('calendar-view-container');
Â  Â  Â  Â  Â  Â  const dayNamesList = { id: ["Min", "Sen", "Sel", "Rab", "Kam", "Jum", "Sab"], en: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], ar: ["Ø£Ø­Ø¯", "Ø¥Ø«Ù†", "Ø«Ù„Ø§", "Ø£Ø±Ø¨", "Ø®Ù…ÙŠ", "Ø¬Ù…Ø¹", "Ø³Ø¨Øª"], tr: ["Paz", "Pzt", "Sal", "Ã‡ar", "Per", "Cum", "Cmt"], fr: ["Dim", "Lun", "Mar", "Mer", "Jeu", "Ven", "Sam"], es: ["Dom", "Lun", "Mar", "MiÃ©", "Jue", "Vie", "SÃ¡b"], de: ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"], ru: ["Ğ’Ñ", "ĞŸĞ½", "Ğ’Ñ‚", "Ğ¡Ñ€", "Ğ§Ñ‚", "ĞŸÑ‚", "Ğ¡Ğ±"], ur: ["Ø§ØªÙˆØ§Ø±", "Ù¾ÛŒØ±", "Ù…Ù†Ú¯Ù„", "Ø¨Ø¯Ú¾", "Ø¬Ù…Ø¹Ø±Ø§Øª", "Ø¬Ù…Ø¹Û", "ÛÙØªÛ"], bn: ["à¦°à¦¬à¦¿", "à¦¸à§‹à¦®", "à¦®à¦™à§à¦—à¦²", "à¦¬à§à¦§", "à¦¬à§ƒà¦¹", "à¦¶à§à¦•à§à¦°", "à¦¶à¦¨à¦¿"] };
Â  Â  Â  Â  Â  Â  const today = new Date();
Â  Â  Â  Â  Â  Â  const todayDayIndex = today.getDay();
Â  Â  Â  Â  Â  Â  let calendarHtml = '';
Â  Â  Â  Â  Â  Â  for (let i = 0; i < 7; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const date = new Date();
Â  Â  Â  Â  Â  Â  Â  Â  date.setDate(today.getDate() - (todayDayIndex - i));
Â  Â  Â  Â  Â  Â  Â  Â  const isToday = i === todayDayIndex;
Â  Â  Â  Â  Â  Â  Â  Â  calendarHtml += `<div class="day ${isToday ? 'today' : ''}"><span class="day-name">${dayNamesList[currentLanguage][i] || dayNamesList['id'][i]}</span><span class="day-number">${date.getDate()}</span></div>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (calendarContainerEl) calendarContainerEl.innerHTML = calendarHtml;
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderPrayerTimes(prayerTimes) {
Â  Â  Â  Â  Â  Â  const prayerListContainerEl = document.getElementById('prayer-list-container');
Â  Â  Â  Â  Â  Â  if (!prayerListContainerEl) return;
Â  Â  Â  Â  Â  Â  prayerListContainerEl.innerHTML = '';
Â  Â  Â  Â  Â  Â  let prayerHtml = '';
Â  Â  Â  Â  Â  Â  const prayerOrder = ['Imsak', 'Fajr', 'Sunrise', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];
Â  Â  Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  Â  Â  const isAfterResetTime = now.getHours() >= 22;
Â  Â  Â  Â  Â  Â  prayerOrder.forEach(key => {
Â  Â  Â  Â  Â  Â  Â  Â  if (prayerTimes[key]) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const ui = prayerUIData[key];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const prayerDate = new Date(`${now.toDateString()} ${prayerTimes[key]}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let iconToShow = ui.icon;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (ui.checkable) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isAfterResetTime) iconToShow = 'â€”';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (now > prayerDate) iconToShow = 'âœ”';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  prayerHtml += `<div class="prayer-item"><span class="icon-status">${iconToShow}</span><div class="prayer-details"><div class="prayer-name">${translations[currentLanguage][key] || key}</div><div class="prayer-desc">${translations[currentLanguage][`${key}_desc`] || key}</div></div><div class="prayer-time-action"><div class="prayer-time">${prayerTimes[key]}</div><div class="prayer-action">ğŸ”Š</div></div></div>`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  prayerListContainerEl.innerHTML = prayerHtml;
Â  Â  Â  Â  }

Â  Â  Â  Â  function startCountdown(prayerTimes) {
Â  Â  Â  Â  Â  Â  if (countdownInterval) clearInterval(countdownInterval);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const prayerOrder = ['Imsak', 'Fajr', 'Sunrise', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  function update() {
Â  Â  Â  Â  Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  Â  Â  Â  Â  let nextPrayerTime, nextPrayerName;

Â  Â  Â  Â  Â  Â  Â  Â  for (const name of prayerOrder) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const prayerDate = new Date(`${now.toDateString()} ${prayerTimes[name]}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (prayerDate > now) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextPrayerTime = prayerDate;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextPrayerName = name;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (!nextPrayerTime) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const tomorrow = new Date(now);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tomorrow.setDate(now.getDate() + 1);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextPrayerTime = new Date(`${tomorrow.toDateString()} ${prayerTimes['Imsak']}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextPrayerName = 'Imsak';
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  const diff = nextPrayerTime - now;
Â  Â  Â  Â  Â  Â  Â  Â  if (diff < 0) return;

Â  Â  Â  Â  Â  Â  Â  Â  const h = String(Math.floor(diff / 3600000)).padStart(2, '0');
Â  Â  Â  Â  Â  Â  Â  Â  const m = String(Math.floor((diff % 3600000) / 60000)).padStart(2, '0');
Â  Â  Â  Â  Â  Â  Â  Â  const s = String(Math.floor((diff % 60000) / 1000)).padStart(2, '0');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('countdown-timer').textContent = `${h}:${m}:${s}`;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('next-prayer-name').textContent = translations[currentLanguage][nextPrayerName] || nextPrayerName;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  update();
Â  Â  Â  Â  Â  Â  countdownInterval = setInterval(update, 1000);
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateDates() {
Â  Â  Â  Â  Â  Â  const hijriMonths = ["Muharram", "Safar", "Rabiul Awal", "Rabiul Akhir", "Jumadil Awal", "Jumadil Akhir", "Rajab", "Syaban", "Ramadhan", "Syawal", "Zulkaidah", "Zulhijah"];
Â  Â  Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  Â  Â  const localeMap = { id: 'id-ID', en: 'en-US', ar: 'ar-SA', tr: 'tr-TR', fr: 'fr-FR', es: 'es-ES', de: 'de-DE', ru: 'ru-RU', ur: 'ur-PK', bn: 'bn-BD' };
Â  Â  Â  Â  Â  Â  const locale = localeMap[currentLanguage] || 'en-US';
Â  Â  Â  Â  Â  Â  document.getElementById('gregorian-date-display').textContent = now.toLocaleDateString(locale, { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });
Â  Â  Â  Â  Â  Â  const hijriFmt = new Intl.DateTimeFormat('en-TN-u-ca-islamic', { day: 'numeric', month: 'numeric', year: 'numeric' });
Â  Â  Â  Â  Â  Â  const parts = hijriFmt.formatToParts(now);
Â  Â  Â  Â  Â  Â  const d = parts.find(p => p.type === 'day').value;
Â  Â  Â  Â  Â  Â  const m = parseInt(parts.find(p => p.type === 'month').value);
Â  Â  Â  Â  Â  Â  const y = parts.find(p => p.type === 'year').value.split(' ')[0];
Â  Â  Â  Â  Â  Â  document.getElementById('hijri-date-display').textContent = `${d} ${hijriMonths[m-1]} ${y} H`;
Â  Â  Â  Â  }

Â  Â  Â  Â  function fetchCityName(lat, lon) {
Â  Â  Â  Â  Â  Â  fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`).then(r => r.json()).then(data => {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('city-name').textContent = data.address.city || data.address.town || data.address.village || "Lokasi tidak dikenal";
Â  Â  Â  Â  Â  Â  }).catch(console.error);
Â  Â  Â  Â  }

Â  Â  Â  Â  function fetchPrayerTimings(lat, lon) {
Â  Â  Â  Â  Â  Â  const ts = Math.floor(Date.now() / 1000);
Â  Â  Â  Â  Â  Â  fetch(`https://api.aladhan.com/v1/timings/${ts}?latitude=${lat}&longitude=${lon}&method=11`).then(r => r.json()).then(j => {
Â  Â  Â  Â  Â  Â  Â  Â  if (j.code === 200) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const originalTimings = j.data.timings;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const adjustedTimings = {};

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (const key in originalTimings) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  adjustedTimings[key] = adjustTimeByTwoMinutes(originalTimings[key]);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.latestPrayerTimes = adjustedTimings;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderPrayerTimes(adjustedTimings);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  startCountdown(adjustedTimings);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }).catch(console.error);
Â  Â  Â  Â  }

Â  Â  Â  Â  function getLocation() {
Â  Â  Â  Â  Â  Â  const fallbackLat = 3.5952, fallbackLon = 98.6722; // Medan

Â  Â  Â  Â  Â  Â  if (navigator.geolocation) {
Â  Â  Â  Â  Â  Â  Â  Â  navigator.geolocation.getCurrentPosition(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // --- Bagian Sukses ---
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (position) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchPrayerTimings(position.coords.latitude, position.coords.longitude);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchCityName(position.coords.latitude, position.coords.longitude);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // --- Bagian Error (Yang Diperbaiki) ---
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (error) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchPrayerTimings(fallbackLat, fallbackLon);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchCityName(fallbackLat, fallbackLon);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let alertMessage = "";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  switch(error.code) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case error.PERMISSION_DENIED:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertMessage = "Izin lokasi ditolak oleh pengguna. Menampilkan jadwal & lokasi untuk Medan.";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case error.POSITION_UNAVAILABLE:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertMessage = "Informasi lokasi tidak tersedia saat ini. Menampilkan jadwal & lokasi untuk Medan.";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case error.TIMEOUT:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertMessage = "Waktu permintaan lokasi habis. Menampilkan jadwal & lokasi untuk Medan.";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case error.UNKNOWN_ERROR:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertMessage = "Terjadi kesalahan yang tidak diketahui saat mengambil lokasi. Menampilkan jadwal & lokasi untuk Medan.";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertMessage) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert(alertMessage);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  fetchPrayerTimings(fallbackLat, fallbackLon);
Â  Â  Â  Â  Â  Â  Â  Â  fetchCityName(fallbackLat, fallbackLon);
Â  Â  Â  Â  Â  Â  Â  Â  alert("Browser tidak mendukung lokasi. Menampilkan jadwal & lokasi untuk Medan.");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- DOA HARIAN FEATURE ---
Â  Â  Â  Â  function setupDoaHarian() {
Â  Â  Â  Â  Â  Â  function renderDoaListView(filter) {
Â  Â  Â  Â  Â  Â  Â  Â  doaListContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  let filteredData = (filter === 'bookmarked') ? doaHarianData.filter(doa => bookmarkedDoas.includes(doa.id)) : doaHarianData;
Â  Â  Â  Â  Â  Â  Â  Â  if (filteredData.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  doaListContainer.innerHTML = `<p style="text-align:center; margin-top: 2rem; color: var(--text-light);">Belum ada doa yang ditandai.</p>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  filteredData.forEach(doa => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const item = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.className = 'doa-list-item';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.innerHTML = `<span class="num">${doa.id}</span><div class="details"><div class="title">${doa.title}</div><div class="subtitle">${doa.subtitle}</div></div><span class="arabic">${doa.arabic.split(' ')[0]}...</span>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.addEventListener('click', () => showSingleDoa(doa.id));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  doaListContainer.appendChild(item);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  function showSingleDoa(doaId) {
Â  Â  Â  Â  Â  Â  Â  Â  const doa = doaHarianData.find(d => d.id === doaId);
Â  Â  Â  Â  Â  Â  Â  Â  if (!doa) return;
Â  Â  Â  Â  Â  Â  Â  Â  currentOpenDoaId = doa.id;
Â  Â  Â  Â  Â  Â  Â  Â  singleDoaModal.querySelector('#single-doa-modal-title').textContent = doa.title;
Â  Â  Â  Â  Â  Â  Â  Â  singleDoaModal.querySelector('#single-doa-modal-body').innerHTML = `<p class="single-doa-arabic">${doa.arabic}</p><p class="single-doa-arti"><b>Artinya:</b> ${doa.arti}</p>`;
Â  Â  Â  Â  Â  Â  Â  Â  updateBookmarkIcon();
Â  Â  Â  Â  Â  Â  Â  Â  singleDoaModal.style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('last_read_doa_id', doa.id);
Â  Â  Â  Â  Â  Â  Â  Â  lastReadDoaId = doa.id;
Â  Â  Â  Â  Â  Â  Â  Â  renderLastRead();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  function renderLastRead() {
Â  Â  Â  Â  Â  Â  Â  Â  if (lastReadDoaId) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const doa = doaHarianData.find(d => d.id == lastReadDoaId);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lastReadCardText.textContent = doa ? doa.title : (translations[currentLanguage].no_last_read || 'No prayers have been read yet');
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lastReadCardText.textContent = translations[currentLanguage].no_last_read || 'No prayers have been read yet';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  lastReadCard.addEventListener('click', () => { if (lastReadDoaId) showSingleDoa(parseInt(lastReadDoaId)); });
Â  Â  Â  Â  Â  Â  function updateBookmarkIcon() { singleDoaModal.querySelector('#bookmark-doa-btn').classList.toggle('bookmarked', bookmarkedDoas.includes(currentOpenDoaId)); }
Â  Â  Â  Â  Â  Â  singleDoaModal.querySelector('#bookmark-doa-btn').addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  const index = bookmarkedDoas.indexOf(currentOpenDoaId);
Â  Â  Â  Â  Â  Â  Â  Â  if (index > -1) bookmarkedDoas.splice(index, 1);
Â  Â  Â  Â  Â  Â  Â  Â  else bookmarkedDoas.push(currentOpenDoaId);
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('bookmarked_doas', JSON.stringify(bookmarkedDoas));
Â  Â  Â  Â  Â  Â  Â  Â  updateBookmarkIcon();
Â  Â  Â  Â  Â  Â  Â  Â  if (document.querySelector('.tab-item.active').dataset.tab === 'bookmarked') renderDoaListView('bookmarked');
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.tab-item').forEach(tab => {
Â  Â  Â  Â  Â  Â  Â  Â  tab.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.querySelector('.tab-item.active').classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tab.classList.add('active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderDoaListView(tab.dataset.tab);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  singleDoaModal.querySelector('.close-button').addEventListener('click', () => singleDoaModal.style.display = 'none');
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- DZIKIR & TASBIH FEATURE ---
Â  Â  Â  Â  function saveDzikirState() {
Â  Â  Â  Â  Â  Â  localStorage.setItem('dzikir_state', JSON.stringify(dzikirState));
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderDzikirList() {
Â  Â  Â  Â  Â  Â  dzikirListContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  dzikirData.forEach(dzikir => {
Â  Â  Â  Â  Â  Â  Â  Â  const state = dzikirState[dzikir.id] || { count: 0, lap: 0, lastUpdate: 'Belum pernah' };
Â  Â  Â  Â  Â  Â  Â  Â  const item = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  item.className = 'dzikir-item';
Â  Â  Â  Â  Â  Â  Â  Â  item.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="dzikir-item-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="title">${dzikir.title}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="timestamp">${state.lastUpdate}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="dzikir-item-progress">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="count">${state.count}/${dzikir.target}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="lap">${state.lap} Putaran</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  Â  Â  Â  Â  item.addEventListener('click', () => showTasbihView(dzikir.id));
Â  Â  Â  Â  Â  Â  Â  Â  dzikirListContainer.appendChild(item);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function showTasbihView(id) {
Â  Â  Â  Â  Â  Â  currentDzikirId = id;
Â  Â  Â  Â  Â  Â  const dzikir = dzikirData.find(d => d.id === id);
Â  Â  Â  Â  Â  Â  const state = dzikirState[id] || { count: 0, lap: 0 };
Â  Â  Â  Â  Â  Â  tasbihTitle.textContent = dzikir.title;
Â  Â  Â  Â  Â  Â  tasbihCurrentCount.textContent = state.count;
Â  Â  Â  Â  Â  Â  tasbihTargetCount.textContent = `/ ${dzikir.target}`;
Â  Â  Â  Â  Â  Â  showView('tasbih-view');
Â  Â  Â  Â  }

Â  Â  Â  Â  function setupDzikir() {
Â  Â  Â  Â  Â  Â  tasbihTapArea.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  if (!currentDzikirId) return;
Â  Â  Â  Â  Â  Â  Â  Â  const dzikir = dzikirData.find(d => d.id === currentDzikirId);
Â  Â  Â  Â  Â  Â  Â  Â  let state = dzikirState[currentDzikirId];
Â  Â  Â  Â  Â  Â  Â  Â  if (!state) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state = { count: 0, lap: 0 };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dzikirState[currentDzikirId] = state;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  state.count++;
Â  Â  Â  Â  Â  Â  Â  Â  if (state.count > dzikir.target) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.count = 1;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.lap++;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  state.lastUpdate = new Date().toLocaleString('id-ID', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' });
Â  Â  Â  Â  Â  Â  Â  Â  tasbihCurrentCount.textContent = state.count;
Â  Â  Â  Â  Â  Â  Â  Â  saveDzikirState();
Â  Â  Â  Â  Â  Â  Â  Â  if (navigator.vibrate) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  navigator.vibrate(50);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  tasbihResetBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  if (!currentDzikirId) return;
Â  Â  Â  Â  Â  Â  Â  Â  dzikirState[currentDzikirId].count = 0;
Â  Â  Â  Â  Â  Â  Â  Â  dzikirState[currentDzikirId].lap = 0;
Â  Â  Â  Â  Â  Â  Â  Â  tasbihCurrentCount.textContent = 0;
Â  Â  Â  Â  Â  Â  Â  Â  saveDzikirState();
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  // --- NOTIFICATION FEATURE ---
Â  Â  Â  Â  function setupNotifications() {
Â  Â  Â  Â  Â  Â  if (!("Notification" in window)) {
Â  Â  Â  Â  Â  Â  Â  Â  console.log("Browser ini tidak mendukung notifikasi desktop");
Â  Â  Â  Â  Â  Â  } else if (Notification.permission === "granted") {
Â  Â  Â  Â  Â  Â  Â  Â  console.log("Izin notifikasi sudah diberikan.");
Â  Â  Â  Â  Â  Â  } else if (Notification.permission !== "denied") {
Â  Â  Â  Â  Â  Â  Â  Â  Notification.requestPermission().then(function (permission) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (permission === "granted") {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Izin notifikasi diberikan.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  new Notification("Terima kasih! Notifikasi telah diaktifkan.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- SETTINGS & LANGUAGE ---
Â  Â  Â  Â  function setLanguage(lang) {
Â  Â  Â  Â  Â  Â  currentLanguage = lang;
Â  Â  Â  Â  Â  Â  document.querySelectorAll('[data-key]').forEach(el => {
Â  Â  Â  Â  Â  Â  Â  Â  if (translations[lang] && translations[lang][el.dataset.key]) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  el.textContent = translations[lang][el.dataset.key];
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  updateDates();
Â  Â  Â  Â  Â  Â  generateCalendar();
Â  Â  Â  Â  Â  Â  if (window.latestPrayerTimes) {
Â  Â  Â  Â  Â  Â  Â  Â  renderPrayerTimes(window.latestPrayerTimes);
Â  Â  Â  Â  Â  Â  Â  Â  startCountdown(window.latestPrayerTimes);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  renderLastRead();
Â  Â  Â  Â  }

Â  Â  Â  Â  function setupSettings() {
Â  Â  Â  Â  Â  Â  const darkModeToggle = document.getElementById('dark-mode-toggle');
Â  Â  Â  Â  Â  Â  const languageSelect = document.getElementById('language-select');
Â  Â  Â  Â  Â  Â  const applyTheme = (theme) => {
Â  Â  Â  Â  Â  Â  Â  Â  darkModeToggle.checked = theme === 'dark';
Â  Â  Â  Â  Â  Â  Â  Â  document.body.classList.toggle('dark-mode', theme === 'dark');
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  darkModeToggle.addEventListener('change', () => {
Â  Â  Â  Â  Â  Â  Â  Â  const theme = darkModeToggle.checked ? 'dark' : 'light';
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('theme', theme);
Â  Â  Â  Â  Â  Â  Â  Â  applyTheme(theme);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  const savedTheme = localStorage.getItem('theme') || 'light';
Â  Â  Â  Â  Â  Â  applyTheme(savedTheme);
Â  Â  Â  Â  Â  Â  languageSelect.addEventListener('change', () => {
Â  Â  Â  Â  Â  Â  Â  Â  const selectedLang = languageSelect.value;
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('language', selectedLang);
Â  Â  Â  Â  Â  Â  Â  Â  setLanguage(selectedLang);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  const savedLang = localStorage.getItem('language') || 'id';
Â  Â  Â  Â  Â  Â  languageSelect.value = savedLang;
Â  Â  Â  Â  Â  Â  settingsBtn.addEventListener('click', (e) => { e.preventDefault(); settingsModal.style.display = 'flex'; closeSidebar(); });
Â  Â  Â  Â  Â  Â  settingsModal.querySelector('.close-button').addEventListener('click', () => settingsModal.style.display = 'none');
Â  Â  Â  Â  Â  Â  window.addEventListener('click', (e) => { if (e.target == settingsModal) settingsModal.style.display = 'none'; });
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- INITIALIZATION ---
Â  Â  Â  Â  setupNavigation();
Â  Â  Â  Â  setupSettings();
Â  Â  Â  Â  setupNotifications();
Â  Â  Â  Â  setupDoaHarian();
Â  Â  Â  Â  setupDzikir();
Â  Â  Â  Â  getLocation();
Â  Â  Â  Â  showView('prayer-times-view');
Â  Â  Â  Â  setLanguage(localStorage.getItem('language') || 'id');
Â  Â  Â  Â  setInterval(() => { if (window.latestPrayerTimes) renderPrayerTimes(window.latestPrayerTimes); }, 60000);
Â  Â  });
</script>
</body>
</html>
